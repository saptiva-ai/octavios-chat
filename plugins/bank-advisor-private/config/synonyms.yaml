# HU3 - NLP Query Interpretation Configuration
# Metric synonyms and intent patterns for natural language processing
# This file is loaded at startup by ConfigService

metrics:
  imor:
    display_name: "Índice de Morosidad"
    column: "imor"
    type: "ratio"
    aliases:
      - "índice de morosidad"
      - "indice de morosidad"
      - "morosidad"
      - "cartera vencida ratio"
      - "mora"
      - "índice mora"
      - "indice mora"

  icor:
    display_name: "Índice de Cobertura"
    column: "icor"
    type: "ratio"
    aliases:
      - "índice de cobertura"
      - "indice de cobertura"
      - "cobertura"
      - "provisiones"
      - "reservas cobertura"

  icap_total:
    display_name: "Índice de Capitalización"
    column: "icap_total"
    type: "ratio"
    aliases:
      - "icap"
      - "índice de capitalización"
      - "indice de capitalizacion"
      - "capitalización"
      - "capitalizacion"
      - "capital"

  cartera_total:
    display_name: "Cartera Total"
    column: "cartera_total"
    type: "currency"
    aliases:
      - "cartera total"
      # NOTE: "cartera" alone is ambiguous - moved to ambiguous_terms section
      - "préstamos totales"
      - "prestamos totales"
      - "créditos totales"
      - "creditos totales"
      - "total cartera"
      - "cartera de credito total"

  cartera_comercial_total:
    display_name: "Cartera Comercial"
    column: "cartera_comercial_total"
    type: "currency"
    aliases:
      - "cartera comercial"
      - "comercial"
      - "crédito comercial"
      - "credito comercial"
      - "cartera comercial cc"
      - "cc comercial"

  cartera_comercial_sin_gob:
    display_name: "Cartera Comercial Sin Gobierno"
    column: "cartera_comercial_total"
    type: "currency"
    calculation: "subtract:entidades_gubernamentales_total"
    aliases:
      - "cartera comercial sin gobierno"
      - "comercial sin gob"
      - "cartera comercial privada"
      - "comercial privado"
      - "cartera comercial sin gubernamentales"
      - "cartera sin gobierno"

  cartera_consumo_total:
    display_name: "Cartera Consumo"
    column: "cartera_consumo_total"
    type: "currency"
    aliases:
      - "cartera consumo"
      - "consumo"
      - "crédito al consumo"
      - "credito al consumo"

  cartera_vivienda_total:
    display_name: "Cartera Vivienda"
    column: "cartera_vivienda_total"
    type: "currency"
    aliases:
      - "cartera vivienda"
      - "vivienda"
      - "hipotecario"
      - "hipoteca"
      - "crédito hipotecario"
      - "credito hipotecario"

  cartera_vencida:
    display_name: "Cartera Vencida"
    column: "cartera_vencida"
    type: "currency"
    aliases:
      - "cartera vencida"
      - "vencida"
      - "cartera mala"
      - "cartera en mora"

  entidades_gubernamentales_total:
    display_name: "Entidades Gubernamentales"
    column: "entidades_gubernamentales_total"
    type: "currency"
    aliases:
      - "entidades gubernamentales"
      - "gobierno"
      - "cartera gobierno"
      - "sector público"
      - "sector publico"

  entidades_financieras_total:
    display_name: "Entidades Financieras"
    column: "entidades_financieras_total"
    type: "currency"
    aliases:
      - "entidades financieras"
      - "financieras"
      - "interbancario"

  empresarial_total:
    display_name: "Empresarial"
    column: "empresarial_total"
    type: "currency"
    aliases:
      - "empresarial"
      - "empresas"
      - "corporativo"

  reservas_etapa_todas:
    display_name: "Reservas Totales"
    column: "reservas_etapa_todas"
    type: "currency"
    aliases:
      - "reservas"
      - "reservas totales"
      - "provisiones"
      - "estimaciones"
      - "pérdida esperada"
      - "perdida esperada"
      - "pérdida esperada total"
      - "perdida esperada total"
      - "reservas preventivas"

  tda_cartera_total:
    display_name: "Tasa de Deterioro"
    column: "tda_cartera_total"
    type: "ratio"
    aliases:
      - "tda"
      - "tasa de deterioro"
      - "deterioro"
      - "tasa deterioro"

  tasa_mn:
    display_name: "Tasa Moneda Nacional"
    column: "tasa_mn"
    type: "ratio"
    aliases:
      - "tasa mn"
      - "tasa pesos"
      - "tasa moneda nacional"
      - "interés pesos"
      - "interes pesos"

  tasa_me:
    display_name: "Tasa Moneda Extranjera"
    column: "tasa_me"
    type: "ratio"
    aliases:
      - "tasa me"
      - "tasa dólares"
      - "tasa dolares"
      - "tasa moneda extranjera"
      - "interés dólares"
      - "interes dolares"

  pe_total:
    display_name: "Pérdida Esperada Total"
    column: "pe_total"
    type: "ratio"
    aliases:
      - "pe total"
      - "pérdida esperada total"
      - "perdida esperada total"
      - "pe"
      - "expected loss"
      - "ratio reservas cartera"

  pe_empresarial:
    display_name: "Pérdida Esperada Empresarial"
    column: "pe_empresarial"
    type: "ratio"
    aliases:
      - "pe empresarial"
      - "pérdida esperada empresarial"
      - "perdida esperada empresarial"
      - "pe corporativo"
      - "pe comercial"

  pe_consumo:
    display_name: "Pérdida Esperada Consumo"
    column: "pe_consumo"
    type: "ratio"
    aliases:
      - "pe consumo"
      - "pérdida esperada consumo"
      - "perdida esperada consumo"

  pe_vivienda:
    display_name: "Pérdida Esperada Vivienda"
    column: "pe_vivienda"
    type: "ratio"
    aliases:
      - "pe vivienda"
      - "pérdida esperada vivienda"
      - "perdida esperada vivienda"
      - "pe hipotecario"

  reservas_variacion_mm:
    display_name: "Variación Mensual Reservas"
    column: "reservas_variacion_mm"
    type: "ratio"
    aliases:
      - "variación reservas"
      - "variacion reservas"
      - "cambio reservas"
      - "reservas mes a mes"
      - "reservas mm"
      - "variacion mensual reservas"

  ct_etapa_1:
    display_name: "Cartera Etapa 1"
    column: "ct_etapa_1"
    type: "ratio"
    aliases:
      - "etapa 1"
      - "cartera etapa 1"
      - "stage 1"
      - "performing"
      - "etapa uno"

  ct_etapa_2:
    display_name: "Cartera Etapa 2"
    column: "ct_etapa_2"
    type: "ratio"
    aliases:
      - "etapa 2"
      - "cartera etapa 2"
      - "stage 2"
      - "watchlist"
      - "etapa dos"

  ct_etapa_3:
    display_name: "Cartera Etapa 3"
    column: "ct_etapa_3"
    type: "ratio"
    aliases:
      - "etapa 3"
      - "cartera etapa 3"
      - "stage 3"
      - "non-performing"
      - "etapa tres"
      - "impaired"

  quebrantos_cc:
    display_name: "Quebrantos Comerciales"
    column: "quebrantos_cc"
    type: "currency"
    aliases:
      - "quebrantos"
      - "quebrantos comerciales"
      - "write-offs"
      - "castigos"
      - "quitas"
      - "pérdidas definitivas"
      - "perdidas definitivas"

  quebrantos_vs_cartera_cc:
    display_name: "Ratio Quebrantos vs Cartera"
    column: "quebrantos_vs_cartera_cc"
    type: "ratio"
    aliases:
      - "quebrantos vs cartera"
      - "ratio quebrantos"
      - "quebrantos ratio"
      - "tasa quebrantos"

  tasa_sistema:
    display_name: "Tasa Efectiva Sistema"
    column: "tasa_sistema"
    type: "ratio"
    aliases:
      - "tasa sistema"
      - "te sistema"
      - "tasa efectiva sistema"
      - "tasa bancaria sistema"
      - "interés sistema"
      - "interes sistema"

  tasa_invex_consumo:
    display_name: "Tasa Efectiva INVEX Consumo"
    column: "tasa_invex_consumo"
    type: "ratio"
    aliases:
      - "tasa invex consumo"
      - "te invex"
      - "tasa efectiva invex"
      - "tasa invex"
      - "interés invex consumo"
      - "interes invex consumo"

# Multi-metric queries that require querying multiple fields together
# These trigger special visualization modes like stacked bars
multi_metric_queries:
  etapas_deterioro:
    keywords:
      - "etapas de deterioro"
      - "etapas deterioro"
      - "distribución etapas"
      - "distribucion etapas"
      - "etapa 1 2 3"
      - "stages"
      - "portfolio stages"
      - "ifrs 9 stages"
      - "deterioro ifrs 9"
    metrics:
      - "ct_etapa_1"
      - "ct_etapa_2"
      - "ct_etapa_3"
    visualization: "stacked_bar"
    description: "Distribución de cartera por etapas de deterioro IFRS 9"

  composicion_cartera:
    keywords:
      - "composición de cartera"
      - "composicion de cartera"
      - "composición cartera"
      - "distribución de cartera"
      - "distribucion de cartera"
      - "desglose cartera"
    metrics:
      - "cartera_consumo_total"
      - "cartera_vivienda_total"
      - "empresarial_total"
    visualization: "stacked_bar"
    description: "Composición de cartera por tipo de crédito"

# Ambiguous terms that require clarification before processing
# These terms match multiple possible metrics and should trigger user choice
ambiguous_terms:
  cartera:
    message: "Hay varios tipos de cartera disponibles. ¿A cuál te refieres?"
    options:
      - id: "cartera_total"
        label: "Cartera Total"
        description: "Total de créditos otorgados"
      - id: "cartera_comercial_total"
        label: "Cartera Comercial"
        description: "Créditos a empresas"
      - id: "cartera_consumo_total"
        label: "Cartera Consumo"
        description: "Créditos personales y al consumo"
      - id: "cartera_vivienda_total"
        label: "Cartera Vivienda"
        description: "Créditos hipotecarios"
      - id: "cartera_vencida"
        label: "Cartera Vencida"
        description: "Créditos en mora"

  riesgo:
    message: "¿Qué indicador de riesgo te interesa?"
    options:
      - id: "imor"
        label: "IMOR (Morosidad)"
        description: "Índice de morosidad de la cartera"
      - id: "icor"
        label: "ICOR (Cobertura)"
        description: "Índice de cobertura de reservas"
      - id: "tda_cartera_total"
        label: "TDA (Deterioro)"
        description: "Tasa de deterioro de activos"

  tasa:
    message: "¿Qué tipo de tasa te interesa?"
    options:
      - id: "tasa_mn"
        label: "Tasa Moneda Nacional"
        description: "Tasa de interés en pesos"
      - id: "tasa_me"
        label: "Tasa Moneda Extranjera"
        description: "Tasa de interés en dólares"
      - id: "tasa_sistema"
        label: "Tasa Efectiva Sistema"
        description: "Tasa efectiva del sistema bancario"
      - id: "tasa_invex_consumo"
        label: "Tasa Efectiva INVEX Consumo"
        description: "Tasa efectiva de INVEX para consumo"

  etapa:
    message: "¿Qué etapa de deterioro te interesa?"
    options:
      - id: "ct_etapa_1"
        label: "Etapa 1 (Performing)"
        description: "Cartera en buen estado crediticio"
      - id: "ct_etapa_2"
        label: "Etapa 2 (Watchlist)"
        description: "Cartera con deterioro significativo"
      - id: "ct_etapa_3"
        label: "Etapa 3 (Non-performing)"
        description: "Cartera deteriorada (impaired)"

  perdida:
    message: "¿Qué tipo de pérdida esperada te interesa?"
    options:
      - id: "pe_total"
        label: "PE Total"
        description: "Pérdida esperada de toda la cartera"
      - id: "pe_empresarial"
        label: "PE Empresarial"
        description: "Pérdida esperada de cartera empresarial"
      - id: "pe_consumo"
        label: "PE Consumo"
        description: "Pérdida esperada de cartera de consumo"
      - id: "pe_vivienda"
        label: "PE Vivienda"
        description: "Pérdida esperada de cartera hipotecaria"
