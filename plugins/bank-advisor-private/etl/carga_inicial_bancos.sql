-- Catalogo de instituciones

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Actinver', 'Actinver', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Afirme', 'Afirme', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('BBVA México', 'BBVA México', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('BIAfirme', 'BIAfirme', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('BNP Paribas México', 'BNP Paribas México', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('BanCoppel', 'BanCoppel', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banamex', 'Banamex', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banca Mifel', 'Banca Mifel', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banco Azteca', 'Banco Azteca', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banco Base', 'Banco Base', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banco Bineo', 'Banco Bineo', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banco Covalto', 'Banco Covalto', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banco S3', 'Banco S3', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banco Ualá', 'Banco Ualá', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banco del Bajío', 'Banco del Bajío', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Bancrea', 'Bancrea', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Bank of America', 'Bank of America', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Bank of China', 'Bank of China', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Bankaool', 'Bankaool', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banorte', 'Banorte', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Banregio', 'Banregio', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Bansí', 'Bansí', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Barclays', 'Barclays', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('CIBanco', 'CIBanco', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Citi México', 'Citi México', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Compartamos', 'Compartamos', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Consubanco', 'Consubanco', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Credit Suisse', 'Credit Suisse', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Dondé Banco', 'Dondé Banco', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Forjadores', 'Forjadores', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('HSBC', 'HSBC', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Hey Banco', 'Hey Banco', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('ICBC', 'ICBC', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Inbursa', 'Inbursa', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Inmobiliario Mexicano', 'Inmobiliario Mexicano', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Intercam Banco', 'Intercam Banco', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Invex', 'Invex', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('J.P. Morgan', 'J.P. Morgan', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('KEB Hana México', 'KEB Hana México', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Kapital Bank', 'Kapital Bank', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('MUFG Bank', 'MUFG Bank', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Mizuho Bank', 'Mizuho Bank', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Monex', 'Monex', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Multiva', 'Multiva', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Openbank', 'Openbank', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Pagatodo', 'Pagatodo', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Sabadell', 'Sabadell', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Santander', 'Santander', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Scotiabank', 'Scotiabank', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Shinhan', 'Shinhan', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Sistema', 'Sistema', TRUE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Ve por Más', 'Ve por Más', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('Volkswagen Bank', 'Volkswagen Bank', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;

INSERT INTO instituciones (nombre_oficial, nombre_corto, es_sistema)
VALUES ('n.d. No disponible', 'n.d. No disponible', FALSE)
ON CONFLICT (nombre_oficial) DO NOTHING;


-- Catalogo de segmentos de cartera

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('CONSUMO_ARRENDAMIENTO', 'Arrendamiento', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('CONSUMO_AUTOMOTRIZ', 'Crédito automotriz', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('CONSUMO_BIENES_MUEBLES', 'Bienes muebles', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('CONSUMO_MICROCREDITOS', 'Microcréditos', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('CONSUMO_NOMINA', 'Crédito de nómina', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('CONSUMO_OTROS', 'Otros créditos de consumo', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('CONSUMO_PERSONALES', 'Préstamos personales', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('CONSUMO_TARJETA', 'Tarjetas de crédito', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('CONSUMO_TOTAL', 'Consumo total', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('EMPRESAS', 'Crédito a empresas', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('ENTIDADES_FINANCIERAS', 'Crédito a entidades financieras', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('GUBERNAMENTAL_TOTAL', 'Crédito gubernamental total', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('GUB_ESTADOS_MUN', 'Gobiernos estatales y municipales', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('GUB_OTRAS', 'Otras entidades gubernamentales', '')
ON CONFLICT (codigo) DO NOTHING;

INSERT INTO segmentos_cartera (codigo, nombre, descripcion)
VALUES ('VIVIENDA', 'Crédito a la vivienda', '')
ON CONFLICT (codigo) DO NOTHING;


-- Metricas financieras

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    '2024-09-01',
    57336.655688, 8955.747889, 27303.769915,
    34542.285978, 6428.136655, 488.104491,
    1.1656801429525598, 10.958259625425706,
    3.3415706616351333, 115.99846703344541, 3.8761707423361136
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    '2025-08-01',
    77892.407557, 12303.231872, 29803.299266,
    48138.239093000004, 6901.367831, 379.973014,
    0.9445298660458055, 9.219748777492148,
    3.130696805317916, 111.12049522423824, 3.4788457940386737
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    '2025-09-01',
    74182.554629, 12983.966165, 29502.670844,
    50618.417025999996, 6991.895082, 467.381383,
    0.9456310762069988, 9.363717502410864,
    2.9741051331915127, 113.46367440312031, 3.374528964730906
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    '2024-09-01',
    295135.43588, 162775.956936, 64414.764796,
    91651.15278, 8720.05846, 403.280726,
    0.15944577997710366, 5.4810048781545575,
    5.517030870569416, 69.01731052187627, 3.8077063275286664
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    '2025-08-01',
    314172.381854, 179170.055043, 68901.896935,
    87043.479397, 9236.038458, 650.374622,
    0.26444663714027145, 9.01261096861129,
    3.9420726203842356, 84.88272467012725, 3.346138648657221
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    '2025-09-01',
    317026.410095, 178452.958748, 69893.806048,
    89448.3508, 9276.104086, 743.915183,
    0.2789282619833701, 9.51379221669343,
    3.908574071819589, 86.24100409955676, 3.370793525512145
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    '2024-09-01',
    3112767.2553717797, 659425.82540198, 1839030.83922359,
    1887722.8815643499, 355829.94043834996, 70519.17374044,
    3.001852708503374, 26.386440819728357,
    1.678561563183991, 191.71124838985406, 3.217991327772278
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    '2025-08-01',
    3334146.87630382, 563805.88155186, 2012068.88295998,
    2053500.29504395, 401144.42362891, 66280.76555088,
    2.956659127634949, 25.89353391458957,
    1.6507734579365532, 189.94649138022424, 3.1355862639864847
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    '2025-09-01',
    3371171.7737947404, 578436.15319634, 2016789.3988539,
    2096776.80539422, 394994.21580709005, 74212.54109439,
    2.9105992445961917, 25.436267316358656,
    1.7240306314137657, 182.54423006533048, 3.147118442204714
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    '2024-09-01',
    60517.110197, 58323.625361, 272.760627,
    22.185782, 1046.673662, 41.546895,
    0.07966526806443318, 4.5535459273574626,
    0.0, NULL, 0.4430067540503197
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    '2025-08-01',
    62383.195506, 60626.776963, 244.074767,
    21.030542, 1181.9656, 77.246969,
    0.2446175258782689, 12.457084001969552,
    0.0, NULL, 0.5661924896972246
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    '2025-09-01',
    59489.394794, 57716.552484, 241.494682,
    20.640232, 1196.330336, 91.611705,
    0.2595992154735632, 13.055877622700903,
    0.0, NULL, 0.5840936074940151
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    '2024-09-01',
    21917.503097, 4906.588877, 0.0,
    0.0, 5316.191762, 545.077522,
    3.9296710058903908, 15.006965463469395,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    '2025-08-01',
    19439.696349, 5580.617132, 0.0,
    0.0, 5538.5132, 153.254423,
    1.4430860912502228, 6.8540339032036535,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    '2025-09-01',
    19907.812977, 5927.567944, 0.0,
    0.0, 5632.344529, 240.672693,
    0.6956509872629434, 3.2663203631355575,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    '2024-09-01',
    161146.61248051998, 72277.22858507001, 61055.26338731,
    136681.86738232, 19701.92208047, 2170.8554434400003,
    1.729789076265122, 14.677832985169449,
    8.439269326174003, 134.19705614180725, 11.325250995604048
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    '2025-08-01',
    183517.67820795998, 73260.63071841, 79132.1111781,
    147721.70135816, 23537.743192169997, 2478.22345962,
    1.988079391159045, 16.14088549041515,
    5.408495580861566, 150.16929641064542, 8.121899760180664
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    '2025-09-01',
    174574.61097981, 68932.02324971001, 78285.5687298,
    144253.39011379002, 22856.588223169998, 2741.89110812,
    1.8117740687107444, 14.623528872912903,
    5.497830473883556, 150.34336091732047, 8.265623111973184
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    '2024-09-01',
    1520032.61012124, 526442.0878085201, 620251.83567206,
    965592.75498857, 232322.09296323, 18107.128812439998,
    1.6243796755760573, 11.173534168841838,
    2.122619725103227, 205.7946880576929, 4.3682386419272445
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    '2025-08-01',
    1110881.54282368, 402823.79334568, 492087.33762934,
    773161.2967295501, 179568.57357012, 9664.73467284,
    1.3444569486284108, 8.523679824735277,
    2.80628525661877, 190.14216180053796, 5.335931453224704
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    '2025-09-01',
    1117474.4038923602, 406459.6644528, 503424.34843059,
    764231.2416773201, 180328.72359544, 10157.82583411,
    1.2589612851481158, 7.9401548941177476,
    2.799290847568726, 190.55203022652077, 5.3341055419873875
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    '2024-09-01',
    141909.43159, 43044.079907, 77836.74133,
    92564.371231, 13052.394959, 2101.194466,
    1.9914629425595611, 22.538004137871738,
    2.452944657466173, 88.65505440385743, 2.17465942057315
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    '2025-08-01',
    173495.753764, 51807.520579, 84449.257768,
    103623.20771, 15721.823261, 2193.458298,
    2.132834794531603, 22.907843808878596,
    2.847887665995952, 79.6240466268456, 2.267603403052801
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    '2025-09-01',
    171474.221671, 52424.442681, 83911.034545,
    105294.404729, 16021.600834, 2495.214835,
    2.1300566782079513, 22.84979008120812,
    3.1923915698637035, 71.33298961796588, 2.2772283470956936
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    '2024-09-01',
    311661.35516031, 75412.96486464, 183525.60157116,
    222874.58494152, 37306.978123529996, 3833.75321206,
    1.424360348766913, 11.914920915099382,
    3.4627227925995525, 344.9466721830014, 11.944547039994449
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    '2025-08-01',
    360844.95228633, 106765.3390946, 204657.33657624,
    247637.47443345998, 44985.170455650004, 3858.3456678499997,
    1.7760803265511271, 14.381277251113328,
    4.6627621498949345, 255.08493154802915, 11.894003638306906
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    '2025-09-01',
    353123.75052239, 104454.18913027999, 203994.87015889998,
    240763.7871803, 47426.02001617, 4259.19522837,
    1.759929088014665, 14.10970459609564,
    4.872784947924006, 254.1131594289272, 12.382387783346898
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    '2024-09-01',
    118015.496481, 83692.026304, 11442.381591,
    32472.79076, 6519.756209, 1383.258599,
    1.8023671321217052, 31.886898602877384,
    2.463054441582991, 119.02221935779009, 2.9315820603626994
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    '2025-08-01',
    157334.596226, 119405.514186, 10437.396816,
    34646.758133999996, 7536.41639, 1079.192115,
    1.2793634336094797, 25.225007118007003,
    3.3503310946647824, 101.09045665766733, 3.386865003140453
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    '2025-09-01',
    165277.23904, 133687.984359, 10461.585842,
    33012.40681099999, 7043.104889, 1198.94944,
    1.2120051867121622, 24.417243126281136,
    3.2162987053946877, 103.56998221417675, 3.3311199971320753
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    '2024-09-01',
    3877.29044113, 0.0, 45.98192254,
    35.57382094, 3582.73465718, -656.73649129,
    -27.07714063575623, -29.565611323933922,
    5.521152987440964, 293.77194355534033, 16.219598437869056
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    '2025-08-01',
    3070.6309864699997, 0.0, 9.80257958,
    30.11978288, 2995.3398235100003, -667.2501107,
    -30.148729419005754, -32.21314185763829,
    42.710186087568594, 94.3371963328502, 40.29159210355526
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    '2025-09-01',
    3146.7488115, 0.0, 6.53186053,
    27.61913389, 3066.54977408, -724.98405846,
    -30.456122875973435, -32.401330886021114,
    37.73361079404431, 95.97875662964752, 36.21625047159419
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    '2024-09-01',
    6070.20221863, 93.4498505, 4935.1843273,
    5082.02411936, 734.02135687, 7.16589577,
    0.04642033768709915, 0.3459018797922238,
    5.757832006154497, 64.44842539246902, 3.710832064710183
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    '2025-08-01',
    9991.30312452, 291.18912662, 7229.07207554,
    8365.95635004, 1273.25393652, 126.15583776000001,
    1.5704968490038231, 12.761940179210843,
    5.118269979516856, 69.83146907178379, 3.5741631177567075
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    '2025-09-01',
    10135.1845829, 287.00708873, 7422.87897455,
    8490.07689603, 1315.45534712, 130.45719605,
    1.503611581610358, 12.143934747766103,
    5.233333124005972, 70.90816487322526, 3.7108604799352642
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    '2024-09-01',
    6130.423511, 9.597278, 105.106233,
    3134.707789, 2284.859297, 218.836557,
    5.616039755014713, 12.982800346084572,
    0.0, NULL, 0.41915877624498254
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    '2025-08-01',
    5652.191381, 937.358905, 149.064575,
    2189.22882, 2575.373422, 211.402027,
    5.436523946476015, 13.00301997776296,
    0.0, NULL, 0.8564757924543775
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    '2025-09-01',
    8473.933597, 943.686602, 48.470706,
    4814.864699, 2603.682988, 239.961204,
    5.331649029708778, 13.038215877947037,
    0.0, NULL, 0.4602945127310504
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    '2024-09-01',
    6169.605292, 1969.206173, 523.640199,
    5288.301624, 631.90823, -859.285358,
    -26.20769653638139, -154.13848811832685,
    27.727178944105475, 82.03261084537431, 22.745328801618612
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    '2025-08-01',
    7066.932638, 4055.465913, 807.732719,
    5766.391279, 1056.884101, -840.106208,
    -18.58099905457772, -149.41837119361068,
    16.51253389427202, 122.12105029483351, 20.165279821975364
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    '2025-09-01',
    6815.734673, 4096.551505, 845.319949,
    5606.141575, 966.112707, -932.413673,
    -18.169056656071703, -142.56008267712576,
    16.268617481781444, 130.3937150534218, 21.21325472232526
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    '2024-09-01',
    347044.17024664, 23912.92488822, 254571.14331848,
    287440.56421773, 43057.342577819996, 8150.55103154,
    3.203017688919854, 26.385800158125207,
    1.4891518146097766, 141.0904508045269, 2.101051008396727
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    '2025-08-01',
    382977.70274066, 29641.296981220003, 266968.83022736997,
    316482.61115023, 46337.38937196, 6181.8116130299995,
    2.6041970092778883, 21.04584149878751,
    1.845093026090279, 119.95995434398408, 2.213372751701933
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    '2025-09-01',
    383294.54679068, 31836.004425619998, 268199.2054384,
    318804.44697844004, 47108.401107230005, 6924.04811861,
    2.5666430046558673, 20.75882575024283,
    1.9736294454965326, 115.74629370374167, 2.284402934607945
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    '2024-09-01',
    45927.00422072, 1170.6103396800002, 36194.12838347,
    39884.07213707, 4091.1110368600002, 540.23378647,
    1.8288751211129959, 20.18386883899965,
    0.9212734087341264, 139.17427488739506, 1.2821755863361077
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    '2025-08-01',
    53979.926771230006, 2363.7896564499997, 43738.995001940006,
    46782.148895139995, 4915.28343554, 703.96544503,
    1.9613463140176524, 21.68904834554804,
    2.135198370741205, 72.37425767893149, 1.5453339707965867
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    '2025-09-01',
    53536.188645120004, 2386.2443829699996, 44154.66437887,
    46453.13114749001, 4947.88236209, 736.56403485,
    1.991173675682075, 21.951419123042847,
    2.1386388366523157, 87.41120503436298, 1.8694099784506713
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    '2024-09-01',
    124413.2849, 24310.645805, 33087.576033,
    48725.223576, 21375.502104, 2487.526131,
    2.159405343378068, 17.603030288454455,
    0.0, NULL, 0.8713083989968569
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    '2025-08-01',
    203787.474187, 41449.347384, 43913.81652,
    127887.001102, 23193.314767, 1276.606201,
    1.2473836897558421, 9.63358996292528,
    0.0, NULL, 0.9887311589104395
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    '2025-09-01',
    132893.634549, 32834.299728, 45436.84717,
    62033.772894, 23231.558935, 1316.558744,
    1.058071989846914, 8.148525098810257,
    0.0, NULL, 1.1721605088648142
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    '2024-09-01',
    13018.70552885, 0.0, 4341.430926520001,
    10820.242594219999, 2142.87666588, 161.18516232,
    1.9859903400186432, 10.427199598940465,
    4.079134108254807, 99.23790103921787, 4.048047069606888
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    '2025-08-01',
    7391.30027571, 0.0, 2680.19864907,
    4917.83713101, 2319.4276098699997, 142.37680471000002,
    1.9968872607331025, 8.74123797922485,
    4.21124507950799, 109.58847961481763, 4.615039455486625
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    '2025-09-01',
    7087.7761658, 0.0, 2572.10670465,
    4703.554935239999, 2326.74806383, 149.69725867,
    1.9959159530863118, 8.23520828930748,
    4.218182584488214, 109.81915295223462, 4.632372384263634
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    '2024-09-01',
    12531.105905, 0.0, 7855.375721,
    10635.466756, 1371.798919, 89.51789,
    1.5994120180925226, 13.315807394710847,
    1.8752991738662121, 156.38954398465145, 2.932771826357305
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    '2025-08-01',
    19672.837765, 0.0, 12973.416789,
    16499.627351, 2160.673062, 150.303418,
    2.5827366248156673, 25.50234069429583,
    0.8456465461976148, 216.91463557617402, 1.8343311239470579
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    '2025-09-01',
    21351.101684, 0.0, 13865.611383,
    17997.496707, 2178.518202, 135.148558,
    2.1075051399795948, 20.893925323179875,
    0.7821815569775082, 202.21035772178783, 1.5816521243980692
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    '2024-09-01',
    1779459.617643, 419573.34449259995, 1079814.16981195,
    1154816.9472462002, 156968.88329342002, 34253.852331,
    2.5373498525318015, 29.335870125156195,
    0.9369503405360879, 173.73258908120016, 1.6277880850184674
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    '2025-08-01',
    1862911.98097546, 443714.16776, 1158655.4508026498,
    1193359.60364318, 170852.08568912, 31389.193638689998,
    2.4700136217569693, 28.748222254481316,
    1.078210777007586, 156.9280159644639, 1.6920147802730348
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    '2025-09-01',
    1868293.11671187, 442150.63971793, 1164148.35475376,
    1180061.84935697, 174062.42765815, 34506.708516980005,
    2.4257619690797143, 28.095884864918748,
    1.3713432374825454, 134.94421439402862, 1.850548358466459
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    '2024-09-01',
    244704.88758019, 43607.53679306, 171638.24641102,
    177287.55325375, 29582.03089148, 4543.77069868,
    2.6524683530153452, 21.357932038040897,
    1.2336374085117972, 168.534108041248, 2.079099802898524
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    '2025-08-01',
    266573.66572051, 50042.13256179, 186462.781386,
    187213.42935698002, 33331.25509988, 4220.04000944,
    2.6023605875621922, 21.181989660067465,
    1.5762545865631261, 134.43745218645165, 2.119076506147554
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    '2025-09-01',
    271942.66914619, 54460.14079833, 188494.80136932002,
    192910.49535268, 33905.24582441, 4735.05067237,
    2.5740406710167503, 20.89790552228021,
    1.6140056336456488, 130.42362758962452, 2.10504469690156
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    '2024-09-01',
    64180.335286, 25617.5688, 22101.041637,
    39340.660884000004, 6814.284295, 1136.460778,
    2.4550547945887007, 22.39771935716808,
    4.492344864586982, 158.1819081098074, 7.106076825676631
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    '2025-08-01',
    75334.731719, 29403.285573, 30139.469685,
    46987.617406000005, 7915.639484, 860.089159,
    1.7311757653669448, 16.284522891116016,
    3.5418364860323854, 173.29319319412474, 6.1377615443600995
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    '2025-09-01',
    72179.339018, 29511.823939, 29578.352905,
    43736.097756999996, 8051.115043, 995.564718,
    1.7563392803342741, 16.449643611730874,
    3.6772335683916273, 171.68334400264052, 6.313197557002372
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    '2024-09-01',
    119845.31746, 8662.491677, 0.0,
    1084.156342, 10153.025533, 857.51034,
    1.1258485872121429, 11.784412839885206,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    '2025-08-01',
    160700.188795, 19982.312069, 0.0,
    0.0, 9189.686559, 658.181376,
    0.6406841841100865, 8.8955950879538,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    '2025-09-01',
    170675.897702, 19822.93746, 0.0,
    0.0, 9267.768475, 736.263292,
    0.6282696084634758, 9.09193079174721,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    '2024-09-01',
    148514.040029, 60853.072504, 13484.912151,
    55509.599071, 5319.636042, 270.630463,
    0.44782896227294666, 10.050151286453325,
    3.5240425942616143, 104.42867147732132, 3.6801108634823323
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    '2025-08-01',
    68658.223984, 46196.813992, 6940.855395,
    11931.171426, 5176.28499, -533.029784,
    -0.11224776472947304, -2.787784286720002,
    8.106995391452037, 64.710528785437, 5.246079586419621
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    '2025-09-01',
    0.0, 0.0, 0.0,
    0.0, 0.0, 0.0,
    0.28000227714461634, 6.880965099699882,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    '2024-09-01',
    2219.03032136, 206.25123149, 0.0,
    109.53042846, 1459.1466909800001, -15.96148239,
    2.0102569204817327, 2.339758701828689,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    '2025-08-01',
    583611.6481580699, 251623.62794139, 162838.46223598998,
    334183.08884129, 76590.88877086, 7578.95504789,
    1.380636770670243, 11.192472399706933,
    1.3908187999453143, 188.59078729645046, 2.6229561246839124
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    '2025-09-01',
    556350.6369668001, 223945.36167998, 157921.07587359,
    338381.48516612, 77440.19117594, 8270.313070619999,
    1.3967314893783573, 11.20502912215993,
    1.434579322562019, 184.29999638052362, 2.6439296395575416
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    '2024-09-01',
    55485.11809, 0.0, 48565.198904,
    34388.556614999994, 15444.794926, 3545.747489,
    8.409567060736295, 30.809361094341174,
    3.360693296502842, 234.7274446563664, 7.8884694976189245
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    '2025-08-01',
    66815.164986, 0.0, 59110.491326,
    41956.622742, 18575.349177, 3837.921276,
    8.924208751766152, 32.61800614460296,
    3.2626805051639, 236.8782760577243, 7.728581333903696
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    '2025-09-01',
    67642.234333, 0.0, 58108.318914,
    41940.414053, 19080.195086, 4342.767185,
    8.925900492394536, 32.57482816801071,
    3.506594880185179, 236.61153795305765, 8.297008075789334
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    '2024-09-01',
    28448.111561, 730.473165, 23743.327913,
    17197.453892, 4079.48949, 385.871476,
    1.8905155206921802, 12.783396871430739,
    1.6870263826019374, 215.2837946542763, 3.631894413284221
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    '2025-08-01',
    37114.648096, 615.558039, 31460.825303,
    21062.608578, 4960.693694, 690.303624,
    2.7327283926394, 20.073494505664087,
    1.51042810677534, 232.9644915250335, 3.5187611588003613
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    '2025-09-01',
    37020.445035, 797.01326, 31736.663479,
    21400.063189, 5085.679181, 814.670306,
    2.943183186715061, 21.68310828529381,
    1.471866670260067, 237.15308577232042, 3.4905772269760527
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    '2024-09-01',
    2571.795896, 2148.769585, 0.0,
    0.0, 2249.085134, -284.060734,
    -10.696883852871888, -15.44792784026218,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    '2025-08-01',
    2188.569084, 1933.787327, 0.0,
    0.0, 2134.753315, -84.531422,
    -5.313041792722967, -5.690641836520103,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    '2025-09-01',
    2180.655175, 1946.061469, 0.0,
    0.0, 2124.311331, -94.973406,
    -4.912542125322031, -5.2132176747404335,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    '2024-09-01',
    1827.455696, 103.932366, 1030.001957,
    1142.385528, 547.430408, -107.974419,
    -11.140060572418285, -22.828445353440756,
    0.3150163917601178, 291.9544176227203, 0.919704271979359
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    '2025-08-01',
    2765.674017, 176.940153, 1565.196007,
    1814.843326, 501.481858, -79.525865,
    -4.648680025642213, -21.648423336585928,
    0.20730151274913136, 369.2868777304352, 0.7655372839192274
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    '2025-09-01',
    2869.638021, 76.96184, 1512.995989,
    2085.725692, 499.768059, -89.239664,
    -4.3926221518865685, -21.362706125147042,
    0.2144536418860262, 352.5578370715095, 0.7560731213544546
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    '2024-09-01',
    843.595631, 0.0, 490.575639,
    193.686427, 592.7113, 2.776774,
    1.4067658276016617, 2.009661161823786,
    7.030114881020418, 144.96995783841646, 10.19155457900754
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    '2025-08-01',
    928.828242, 0.0, 404.250303,
    251.817861, 629.251539, -28.382147,
    -2.806571862724385, -4.053376313062916,
    8.430632641974793, 135.0562917165994, 11.386099814500325
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    '2025-09-01',
    947.655699, 0.0, 438.991776,
    261.674522, 634.218867, -29.414819,
    -2.9400751090852917, -4.263933015788314,
    7.277588726400196, 155.73783674078544, 11.333959249386941
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    '2024-09-01',
    883735.823643, 174294.644207, 503555.797117,
    579365.6584290001, 83399.378021, 6806.667854,
    0.9811387116016441, 10.330910191436402,
    2.2124577579654843, 154.2675497660482, 3.4131043728221977
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    '2025-08-01',
    890120.350636, 218382.91323, 490989.814062,
    560878.4436880001, 87796.546573, 5896.055557,
    0.7410886585672523, 8.094544154136338,
    2.959428320271661, 129.70583298723764, 3.8385511544685733
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    '2025-09-01',
    897782.351816, 224058.653472, 483659.837055,
    541428.0086340001, 88567.922805, 6730.186523,
    0.7391946990139178, 8.042877643090593,
    2.9904824756733386, 129.23467096886722, 3.8647401878180743
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    '2024-09-01',
    0.0, 0.0, 0.0,
    0.0, 0.0, 0.0,
    NULL, NULL,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    '2025-08-01',
    1573.9544931500002, 0.0, 0.0,
    0.025, 1568.10590437, 47.46417035,
    5.206973469545318, 5.230892482747781,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    '2025-09-01',
    1577.0581625799998, 0.0, 0.0,
    0.025, 1571.25174281, 50.61000879,
    4.852482037650492, 4.874222986959096,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    '2024-09-01',
    8345.145891, 246.54899, 3084.276749,
    6126.415800000001, 1151.911635, 250.396259,
    3.3525342608512982, 27.067063493699994,
    0.0, NULL, 3.3526654193248593
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    '2025-08-01',
    11380.088177, 149.805135, 4986.133014,
    9061.29181, 1389.593535, 186.451497,
    2.278363357604202, 20.428629121778076,
    0.0, NULL, 1.9400029186626107
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    '2025-09-01',
    11989.966799, 98.66393, 5056.296336,
    9662.500349, 1421.100094, 217.90782,
    2.314608423038737, 20.938261936196128,
    0.0, NULL, 1.7640153201653648
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    '2024-09-01',
    638270.81334, 61005.3436, 444506.489228,
    421058.223812, 175402.392395, 18698.46953,
    4.21699868234733, 15.661864692341748,
    1.5876496100780564, 140.31655263069615, 2.2277352007162183
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    '2025-08-01',
    704687.724683, 73588.344402, 466601.032654,
    466616.410218, 201509.512445, 15208.850223,
    3.541085911401213, 12.62843484575423,
    1.5063476165111622, 149.20137460960984, 2.2474913502337484
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    '2025-09-01',
    706596.951915, 72118.810259, 467303.129543,
    466402.168898, 202541.754683, 16938.197796,
    3.3700250149182556, 11.976934444330142,
    1.4700398986666494, 154.1642497007456, 2.266275980081041
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    '2024-09-01',
    14771.00157758, 210.86045812999998, 11686.08084696,
    12202.21856313, 1719.4361704300002, 122.54476976000001,
    1.325426095455123, 10.58650076216201,
    3.565447757435202, 61.60408376876414, 2.196461423221905
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    '2025-08-01',
    16264.33943227, 210.64306764, 12581.46605129,
    13505.659587940001, 1872.53054629, 84.41863045999999,
    1.071030414760372, 9.2734051897828,
    2.8253769823871417, 64.45899378775746, 1.8212095735576572
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    '2025-09-01',
    16161.722819280001, 210.75497545, 12639.04989939,
    13421.284911350001, 1888.23169153, 100.09454401,
    1.065762616986539, 9.224351714632828,
    2.758936136859698, 64.10769984241982, 1.7686904974620679
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    '2024-09-01',
    80292.703402, 33834.627211, 21764.328683,
    38295.384957, 10091.505934, 1966.409322,
    3.902632605914292, 28.49716089951533,
    3.3298832762348427, 168.49230598488433, 5.610597118733103
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    '2025-08-01',
    32202.599261, 10838.547923, 13701.469044,
    18720.003992, 11335.531566, 952.454408,
    2.6412978395177746, 18.488138436124526,
    7.076552345491691, 143.2331783260476, 10.135970840354219
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL,
    NULL, NULL, NULL,
    NULL, NULL,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    '2024-09-01',
    153251.282706, 87341.929467, 41546.324384,
    48331.82945, 9424.012476, 1021.380113,
    0.7023439702783213, 14.26381443405946,
    2.186528049036859, 238.43118640508183, 5.213364768398473
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    '2025-08-01',
    192841.682346, 126332.631615, 49339.463081,
    56044.468711, 10752.405981, 1033.506436,
    0.8561848389103239, 15.927127879364168,
    2.3552900101328933, 241.82046145417226, 5.695573171087384
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    '2025-09-01',
    187127.195817, 120652.299186, 49754.432341,
    59226.979165000004, 10972.741198, 1254.492932,
    0.8929357991901622, 16.647498278193478,
    2.2510827283161587, 255.65101199996053, 5.754915775896582
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    '2024-09-01',
    170478.815563, 34623.279818, 23030.498262,
    54331.035214, 32661.876954, 3314.52098,
    2.162142383270116, 13.383445359402069,
    0.0, NULL, 0.7248353557136773
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    '2025-08-01',
    253819.009713, 44567.925537, 24842.326109,
    82874.920132, 36986.56165, 3117.426235,
    2.1620124749699494, 13.504985536262968,
    0.0, NULL, 0.6420572063185936
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    '2025-09-01',
    244283.492588, 49214.2537, 23631.979119,
    85658.553719, 37594.940198, 3725.804783,
    2.2086398947940524, 14.021129681876152,
    0.0, NULL, 0.6179218306882932
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    '2024-09-01',
    5325.333639, 1810.992579, 3455.505709,
    3577.988812, 1716.879509, 39.263621,
    0.9250722836934273, 2.690285624643618,
    1.6157863624585898, 109.76151273812056, 1.7735115540507995
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    '2025-08-01',
    5467.790569, 1819.541918, 3613.103719,
    3653.114283, 1756.299403, 30.272313,
    0.7633624668175878, 2.5198903483390613,
    1.5999749383336204, 127.47702190571344, 2.0396004026254744
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    '2025-09-01',
    5351.676337, 1790.761848, 3523.981864,
    3524.6841750000003, 1760.514259, 34.487169,
    0.7603828238688094, 2.50577163611659,
    1.642695797937285, 127.13588317031652, 2.0884558105092452
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    '2024-09-01',
    10889.62724085, 2915.617736, 4640.77035637,
    9283.563713380001, 1131.34305976, -160.59296093,
    -3.211135136368818, -21.425786809631596,
    3.37845991937076, 130.17618842881268, 4.3979503506319935
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    '2025-08-01',
    28842.89484828, 5959.03477595, 10101.26931166,
    24515.15924248, 1895.63538154, 226.40022297,
    1.1636128060341093, 12.943150396508557,
    2.7156991912229236, 153.72453323314573, 4.174695905723754
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    '2025-09-01',
    51555.184686, 11067.334504, 22058.982069,
    46550.018464, 3661.565164, 524.064339,
    2.4412092440740407, 28.636933374978252,
    1.4502096334244043, 178.95398159188903, 2.5952078804421097
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    '2024-09-01',
    44060.316929, 6538.439292, 13684.454754,
    28153.442137, 8762.00558, 928.139779,
    2.8589110442982246, 15.320242443260254,
    0.0, NULL, 0.5391097732880852
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    '2025-08-01',
    40467.075251, 8557.317206, 7477.133506,
    28967.286203, 9638.69991, 898.030936,
    2.694522713865576, 13.151755482616432,
    0.0, NULL, 0.7741085932671055
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    '2025-09-01',
    41992.127607, 8416.801028, 5841.381443,
    30112.139374, 9739.055579, 998.341976,
    2.715901161551352, 13.089458947527987,
    0.0, NULL, 0.8550176612734516
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    '2024-09-01',
    10913.63120281, 0.0, 4730.60427294,
    6535.679531379999, 4170.41439073, 348.14009337,
    4.972433929545538, 12.048769340112338,
    0.0, NULL, 0.462493306090951
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    '2025-08-01',
    13828.82126978, 0.0, 6064.050000439999,
    8994.95709671, 4552.6540991, 273.66987306,
    3.5353720824647383, 9.835231685672676,
    0.0, NULL, 0.4636006163860813
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    '2025-09-01',
    14035.26188283, 0.0, 6089.65342738,
    9189.52181409, 4611.9232163100005, 332.93899025999997,
    3.5517338331675896, 10.007775655206737,
    0.0, NULL, 0.4650187520143243
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    '2024-09-01',
    283659.91546022997, 145539.43296813002, 45979.93023495,
    66618.76963214, 13533.60045142, 2418.6859464,
    1.2315134715724643, 24.287967000573417,
    1.4262459105723633, 129.42788562824697, 1.8459599259131476
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    '2025-08-01',
    309578.47518991, 142483.98962957002, 55196.86918223,
    84563.42334465, 16344.35868905, 2292.60043625,
    1.2026299630367996, 24.5339659877235,
    1.4745025504309204, 128.68240213446498, 1.8974253014284594
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    '2025-09-01',
    313762.98231563, 137477.82094885, 54595.98601876,
    80095.01047107, 16694.47400048, 2642.3082802100002,
    1.1981345052701895, 24.218344338839024,
    1.4693962548718162, 129.99267575004995, 1.910107509078898
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    '2024-09-01',
    130340.99509, 46223.188807, 70690.181758,
    80294.26120099999, 9180.783091, 644.501421,
    0.5472420335375374, 7.712105710833832,
    3.4114476933383804, 94.87586777775033, 3.2366406028388353
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    '2025-08-01',
    175226.286759, 58187.559308, 81408.031058,
    115076.15007100001, 10295.787783, 815.021167,
    0.816647014457743, 12.25720665731881,
    2.5688709809355963, 114.35005826414482, 2.937505463430563
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    '2025-09-01',
    177181.610589, 61164.470976, 86876.488318,
    115016.202594, 10502.168409, 921.525497,
    0.8116366832103172, 12.367385372032338,
    2.6903645396492553, 109.92655154518876, 2.957424962431019
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    '2024-09-01',
    0.0, 0.0, 0.0,
    0.0, 0.0, 0.0,
    NULL, NULL,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    '2025-08-01',
    9601.976018, 4559.517863, 181.248346,
    5324.411815, 3721.089992, -716.53002,
    -24.527727007763474, -35.666320697694715,
    2.3362166295299596, 1034.7187552103578, 24.17327162808978
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    '2025-09-01',
    11827.187826, 6100.356075, 227.567008,
    7658.888088, 3584.090023, -862.234226,
    -22.85144153046348, -36.76652849500917,
    4.482328563198405, 592.7741838206539, 26.570086556659394
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    '2024-09-01',
    397.301932, 0.0, 0.0,
    34.976958, 345.082542, -50.268567,
    -13.028624336317653, -17.500246885188204,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    '2025-08-01',
    1195.904921, 0.0, 0.0,
    858.416985, 302.199154, -56.317626,
    -19.390734250893267, -26.405367463819797,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    '2025-09-01',
    844.79428, 0.0, 0.0,
    500.002146, 307.269365, -61.247416,
    -18.020991149422166, -26.893867958665073,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    '2024-09-01',
    135172.524465, 17646.2113, 94054.735111,
    117150.959306, 16455.542718, 789.948308,
    0.7936303295858338, 6.510026044711228,
    2.1751498152491564, 71.72594721890468, 1.5601468084177126
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    '2025-08-01',
    142584.041853, 18477.710819, 100285.573934,
    123074.177716, 17700.943816, 908.878623,
    0.9107234283002832, 7.545866069530281,
    2.036997879021382, 68.99808422888358, 1.4054895123077453
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    '2025-09-01',
    141562.488889, 18276.336085, 101304.317693,
    122179.694905, 17809.232759, 1010.000006,
    0.9416061548854888, 7.779713478254225,
    1.8835613194518848, 69.58585455511327, 1.3106922402101608
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    '2024-09-01',
    1886565.609063, 551674.182525, 874142.252901,
    1033043.44998, 168566.70066, 22275.616085,
    1.545316582221385, 17.608706105327972,
    2.3390753299183773, 135.6401846097437, 3.172726095662258
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    '2025-08-01',
    1991916.736797, 599303.737922, 929316.632501,
    1104934.015612, 164899.948829, 21432.466118,
    1.5219714755548264, 18.861804613972772,
    2.2979288199683676, 135.87506713493534, 3.1223123268450466
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    '2025-09-01',
    2019417.317332, 618043.382066, 926658.927737,
    1066511.485231, 167381.661529, 23805.16662,
    1.5143325231806746, 18.883889914666632,
    2.4064779974756574, 134.08072045151812, 3.226623036522627
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    '2024-09-01',
    877814.046541, 180770.887483, 527608.53507,
    594724.43427, 86404.18333, 7917.274223,
    1.2673771326979824, 13.148883284269,
    3.8660942138272527, 72.36868203520541, 2.797841428786119
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    '2025-08-01',
    871850.277085, 171111.932584, 532170.627505,
    591248.1368559999, 92317.678428, 6651.111608,
    1.1707525890688493, 11.527082954739345,
    4.0424230183199805, 69.02493291064846, 2.790279776359977
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    '2025-09-01',
    893048.679669, 177633.859911, 529339.294929,
    589538.9246660001, 93061.955131, 7479.654525,
    1.1788842499895533, 11.552739557968856,
    4.115935274543016, 69.45942583202596, 2.8589050093154
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    '2024-09-01',
    5961.88223, 1518.794117, 3656.299837,
    4084.6629080000002, 1801.172625, 96.344837,
    2.381942580811696, 7.351756434080145,
    1.5229485950935702, 63.474200566210136, 0.9666794457699723
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    '2025-08-01',
    7096.498206, 1790.103172, 4488.866096,
    5149.089698, 1909.55099, 78.676159,
    1.8179150274960465, 6.412374283790453,
    1.240481801175118, 74.34351143489066, 0.9222177297043616
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    '2025-09-01',
    6930.335281, 1728.752697, 4352.655494,
    4884.9449110000005, 1917.876683, 86.898331,
    1.7668572506516318, 6.276228668436312,
    1.2793010399458, 72.72729313479506, 0.9304010173978636
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    '2024-09-01',
    14248895.665611843, 3679985.8766130204, 7341346.613008621,
    8520586.87825252, 1637104.9718044098, 222612.64501208,
    2.090308281660427, 18.589892994514056,
    2.0590376416913325, 155.9728933191522, 3.21154058427641
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    '2025-08-01',
    15431059.822311811, 4023367.4676661803, 7858406.00264842,
    9233014.21636665, 1804585.80650446, 203173.59618613005,
    1.9621092896793504, 17.390141413118197,
    2.1597893984411014, 150.15522924914984, 3.24303672252807
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    '2025-09-01',
    15362543.547987482, 3991475.6075709905, 7863444.26357039,
    9133939.529527, 1799422.4685518502, 226075.45997495003,
    1.9256742820684145, 17.036980858435548,
    2.235963009899025, 147.3394766474951, 3.294456196816803
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    '2024-09-01',
    89197.883046, 25564.889172, 56671.799952,
    59172.867645, 9186.744312, 663.256132,
    0.9653079685532289, 9.326183994470828,
    3.0933376908529495, 96.81111558253038, 2.9946947272496254
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    '2025-08-01',
    107226.100191, 39069.777691, 59826.378868,
    62064.545451, 10310.74784, 897.26404,
    1.4668428915788072, 14.678822095818681,
    2.895499098854134, 111.15768106154533, 3.218569653444198
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    '2025-09-01',
    109859.848915, 38852.059603, 62000.729441,
    63481.071071000006, 10426.975483, 1019.011015,
    1.4004590274807196, 14.111751522004267,
    2.7592538417277166, 115.20369319624011, 3.1787623303294676
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    '2024-09-01',
    5730.449126, 0.0, 5196.748181,
    1959.474204, 3273.187789, 200.95504,
    6.086630043227821, 9.037061419111163,
    1.0802438379686423, 251.20796503559683, 2.713658562783456
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    '2025-08-01',
    7984.490088, 0.0, 7404.20913,
    3714.901371, 3693.078697, 305.376446,
    6.061504911040997, 12.705889108711101,
    1.1170978499900908, 249.91953127723104, 2.79184571060326
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    '2025-09-01',
    9116.002759, 0.0, 7533.604076,
    4769.066922, 3743.006954, 355.304703,
    6.214351690424169, 13.379388740821737,
    1.1617911841004478, 197.1717919142138, 2.2907244959922153
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL,
    NULL, NULL, NULL,
    NULL, NULL,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL,
    NULL, NULL, NULL,
    NULL, NULL,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_financieras (
    institucion_id, fecha_corte,
    activo_total, inversiones_financieras, cartera_total,
    captacion_total, capital_contable, resultado_neto,
    roa_12m, roe_12m, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL,
    NULL, NULL, NULL,
    NULL, NULL,
    NULL, NULL, NULL
)
ON CONFLICT (institucion_id, fecha_corte) DO UPDATE SET
    activo_total = EXCLUDED.activo_total,
    inversiones_financieras = EXCLUDED.inversiones_financieras,
    cartera_total = EXCLUDED.cartera_total,
    captacion_total = EXCLUDED.captacion_total,
    capital_contable = EXCLUDED.capital_contable,
    resultado_neto = EXCLUDED.resultado_neto,
    roa_12m = EXCLUDED.roa_12m,
    roe_12m = EXCLUDED.roe_12m,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;


-- Cartera segmentada (IMOR/ICOR por segmento)

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    3469495.0775084198, 1.7257780570308685, 95.84377885259678, 1.6540509044673075
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    3737376.858489179, 1.758917004457029, 96.01209375484443, 1.6887730433891837
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    3724672.4816137603, 1.8690688552330323, 93.68186123719157, 1.7509784913869741
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    766552.02406526, 1.2347989719518122, 96.33075713768284, 1.1894911988095047
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    842552.81892533, 1.0776563085188358, 108.17430635120738, 1.1657472365902777
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    839268.0603489298, 1.196550722033067, 102.15988454676261, 1.2223948361724355
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    372849.83641099994, 1.5604647530504725, 91.88584815274996, 1.4338462734651416
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    380939.139511, 1.6108387966846889, 97.0167333400344, 1.5627831799174035
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    377258.90449700004, 1.7976543975926031, 90.42332634284637, 1.6254989024516886
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    422335.38263926, 0.8734444668091812, 84.17748547998663, 0.7352435892240452
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    460160.81172780995, 1.1429573096309245, 70.82415906533231, 0.8094899030218486
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    457808.28108581004, 1.8753544251836625, 62.92493205132585, 1.180065497768352
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    252774.7475163, 1.09322639937433, 164.1774009071288, 1.794830688523363
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    132285.56619133, 2.7548149902077848, 98.84057686198615, 2.7228750278018414
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    138105.89402865, 2.7103877095958513, 98.46174229457888, 2.668694961806206
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    212841.104918, 2.0628019158665323, 91.65808974700887, 1.8907248313479648
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    220723.032516, 2.8889034054648444, 85.84256785668552, 2.4799088661502577
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    219529.05715, 2.8732028683975965, 86.90727795121924, 2.4970224029407033
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    192926.810034, 4.0624433025242945, 78.97558682807248, 3.208338437726289
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    194943.207461, 2.7577768079329115, 80.09953475994345, 2.2089663928718815
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    190991.516149, 2.8979996774736216, 80.94559495957755, 2.3458030808576615
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    310558.80598999996, 1.6517417420020526, 113.49098300713274, 1.8745779397372677
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    326660.46461699996, 1.5115313479362023, 119.96108448633358, 1.8132493973351644
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    329200.029096, 1.417210872007389, 127.3528365717234, 1.8048582457042661
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    133585.8830948, 0.006749680348784535, 17006.207353906375, 1.1478646358401692
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    130764.29248517002, 0.0073875107847928495, 15957.840859712122, 1.1788872145313127
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    215258.25580937997, 1.5820077744036092, 104.19259677545898, 1.648334981340765
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    231432.32859407002, 1.9486717435014203, 94.53499346958752, 1.8421767054627651
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    231747.90136658997, 2.076555317451422, 91.53256442231756, 1.9007243337112838
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    42600.46541564, 0.9951415660458016, 81.84724335540345, 0.8144959392922803
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    45638.8943988, 4.177412947036966, 49.17318288668612, 2.0541669083785914
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    43479.28616081001, 3.7861506010045587, 46.450138383817134, 1.7586721935863419
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    36944.826455999995, 6.680808737698514, 45.103807147057985, 3.0132990889153364
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    39898.805572000005, 4.420989788320573, 51.792745645709125, 2.2897519960876482
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    40246.773872, 4.283067811801082, 54.944610498675786, 2.3533149265882605
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    34072.28728846, 1.7755752923135908, 108.91589432701001, 1.9338837090727694
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    41955.72458148001, 1.8500346814475617, 114.38409024467387, 2.116145339584744
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    42329.0989081, 1.8076001685535157, 118.58763751073715, 2.1435903355277173
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    138704.14323795997, 1.2018854393916654, 134.99207594597016, 1.622450105127154
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    149692.76594036, 1.6140326077097196, 105.58513545037714, 1.7041785150635618
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    151663.63159327998, 1.6581852602700242, 103.1894520165584, 1.7110722834919803
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    22505.880366999998, 0.0, NULL, 0.559798710139478
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    23991.416865, 0.0, NULL, 0.6228481162277534
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    22689.950077, 0.0, NULL, 0.5945994263634712
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    14082.513492, 2.441937351562667, 83.9547359273319, 2.050122055015319
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    14454.032226000001, 1.8825516004491578, 119.81190359450538, 2.2555209086469628
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    14284.716466, 1.879925433866151, 113.35490075895682, 2.130987609901364
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    32814.667981, 5.761884072984551, 81.60678651425992, 4.702088434639647
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    44501.53836400001, 3.6668519785825344, 101.04747358560873, 3.7052612844815576
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    46069.086082, 4.065763954305657, 96.06172475293342, 3.905642978889081
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    31669.943881989995, 4.22339462881282, 80.15269662049715, 3.3851646839187115
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    42102.24905157, 3.836158591555746, 85.58463602802755, 3.2831623680408937
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    41391.457695610006, 3.779671123097285, 88.45329935115572, 3.3432438130024305
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    53246.048145, 1.343112523679667, 130.41485683997266, 1.7516182749565816
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    61096.464329999995, 1.3121854280630514, 129.89843411311043, 1.7045083237143193
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    60628.148588000004, 1.6722909615628192, 107.76294530177239, 1.8021099941954242
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    11053.735461999999, 2.5496547205138826, 91.72732240482141, 2.3387300056955174
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    10138.431559, 3.4491267112177577, 82.08793603174969, 2.831316928358425
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    10175.639041, 3.3066802845920638, 86.77849420693937, 2.869487359206731
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    91728.94899299998, 2.11753558971686, 70.24192462384731, 1.4873977528120574
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    97700.862274, 2.0907282970250605, 68.29877145255531, 1.427941741279048
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    98623.466128, 1.9346039821027043, 68.87020988152581, 1.3323658228504887
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    26737.959714, 0.0, NULL, 0.9424567382680888
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    30806.886736, 0.0, NULL, 1.0791898670224656
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    32391.552114, 0.0, NULL, 1.3234831492212205
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    40004.250264, 4.045697707916929, 73.5706839758852, 2.976447475311195
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    44053.567044, 3.663181770021483, 87.04186383808658, 3.1885016884037087
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    45376.403276000005, 3.51090000965902, 90.06346211250317, 3.1620381000071216
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    22222.498778, 3.0587309365629074, 101.16513121686768, 3.0943691655447907
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    23748.609886, 2.9992542949635785, 88.38310996167495, 2.6508342215479184
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    23804.937881, 2.7863803019179993, 91.30538231718836, 2.5441151874770562
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    17402.967556, 5.409408774513491, 139.54551271911285, 7.548587209467531
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    19368.465709, 5.112532008871886, 155.61774627576352, 7.956007089833447
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    19171.309596000003, 5.289142746990876, 155.64512695243357, 8.232292943249382
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    272.760627, 0.0, NULL, 0.4430067540503197
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    244.074767, 0.0, NULL, 0.5661924896972246
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    241.494682, 0.0, NULL, 0.5840936074940151
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    30879.5931957, 0.9892029068003907, 132.90102390811452, 1.314660791666551
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    36922.14228711, 2.424181013279061, 63.385580084274565, 1.536581197559778
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    37373.71359762999, 2.4238419701686946, 81.63148338400038, 1.9786181551326851
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    2854.4376539200002, 3.1707125463296792, 146.831888268349, 4.655617103337317
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    7785.36687764, 2.9590421895420476, 150.9911210436143, 4.467890974143049
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    18677.843997999997, 1.4305854520929275, 176.918407719053, 2.5309690029032232
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    10310.405322, 0.0, NULL, 0.5215927630434625
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    7456.552997, 0.0, NULL, 0.7621746539301102
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    5819.830104, 0.0, NULL, 0.841942017625606
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    3594.47621, 0.0, NULL, 0.9356020470086795
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    7258.869238, 0.0, NULL, 1.448119542500016
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    6996.559518999999, 0.0, NULL, 1.4120512908052916
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    7577.312666, 1.9242304683326366, 148.25151385968977, 2.852700799452532
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    12389.731053, 0.876604677982109, 193.62594129202705, 1.697334059152801
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    13267.929864000002, 0.8092202106925456, 181.24228660320136, 1.4666492135144136
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    11380.43053832, 3.5600057410464894, 61.95714969967538, 2.2056780862972114
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    12359.498926350001, 2.8512191835601337, 64.57538822519129, 1.8411858569350859
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    12415.984595999998, 2.781072427000618, 64.27247929817722, 1.7874641999112868
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    432.02710592, 0.0, NULL, 0.4606465920146494
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    1437.1176883, 0.0, NULL, 0.5472991421672699
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    1487.79950337, 0.0, NULL, 0.5458187639937981
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    2094.4960920000003, 0.0, NULL, 2.3250684585187567
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    3584.026523, 0.0, NULL, 1.7061965531665235
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    3680.6342779999995, 0.0, NULL, 1.459256365704042
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    4754.516046230001, 5.976625591269562, 64.03536797474034, 3.8271541898419645
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    6593.313712490001, 5.6117976782916665, 68.97517178134463, 3.870747088623186
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    6733.64203422, 5.769002601502237, 70.01252801057196, 4.039024562307379
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    2484.85944808, 4.869910196872594, 90.87001123732287, 4.425287943145658
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    2045.31928774, 3.1986243963058167, 111.61799594291482, 3.5702404488977093
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    1947.9546675899999, 3.358501242790207, 111.3058359127983, 3.73820788242936
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    3656.299837, 1.5229485950935702, 63.47420056621015, 0.9666794457699724
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    4488.866096, 1.240481801175118, 74.34351143489066, 0.9222177297043616
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    4352.655494, 1.2793010399458, 72.72729313479506, 0.9304010173978636
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    250.45698800000002, 39.60483506253777, 38.50033203426082, 15.247993000698386
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    185.755791, 40.4299583855235, 38.299391769660986, 15.484428154382545
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    175.621783, 42.404471545537156, 37.249389494548716, 15.795406769102213
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    3399.672119, 0.0, NULL, 0.4723568755425617
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    3555.294965, 0.0, NULL, 0.5118133426096757
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    3466.093562, 0.0, NULL, 0.5200100250496353
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    729.843912, 0.4445710852213014, 163.6448334578964, 0.7275176120123613
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    965.0295960000001, 0.3362254394527398, 202.33138912217714, 0.6802896022268731
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    1035.3302449999999, 0.3133951717985405, 208.78017058719286, 0.6543069742930191
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.10496, 0.0, NULL, 10.718368902439025
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    4535.3849979999995, 4.531516488470777, 75.59148578355361, 3.425440642161775
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    5125.187755999999, 7.023344199997345, 66.92910131961844, 4.700661155641769
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    18399.895374, 3.9328869827300794, 81.4947149169079, 3.2050950345800593
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    12548.743751999998, 7.677335126446051, 83.86029309218324, 6.438235738706796
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'EMPRESAS' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    264885.14409725, 1.175587778858878, 172.6882322574273, 2.0301017539457504
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    302250.40959379, 1.2362233679348207, 142.76071835628682, 1.7648413605520326
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    294664.57572533, 1.2137868920978874, 140.92127792534274, 1.710483999634644
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    39302.352492519996, 0.04144296879709664, 2042.4501489240433, 0.8464519779148454
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    53327.992281729996, 0.03118390271881712, 2248.481332672434, 0.7011642314313344
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    53679.00357122, 0.03098436008451582, 2429.26581131081, 0.752692466386576
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    10419.906031999999, 0.5449457780676462, 638.7301934433077, 3.4807332224126144
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    18111.077874000002, 0.055796231843865125, 3523.318785520349, 1.9658791181673871
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    16925.773080000003, 0.060110489204313486, 2094.1210310625, 1.2587863963020822
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    55874.23660548001, 0.23210755022159982, 125.78679491600815, 0.29196064818181433
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    63593.813482369995, 0.20694638345046668, 139.9221852251496, 0.2895639019683104
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    62514.61371687, 0.1186420190739899, 224.30940424521503, 0.2661252061693611
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    37507.73960470001, 6.010570597908019, 117.85528159247527, 7.083774903479019
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    2507.78084727, 0.0, NULL, 1.1378862100755056
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    2555.47392625, 0.0, NULL, 1.1236929504555142
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    14169.038797, 0.00020635132995888572, 1367122.3578904166, 2.821075167672152
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    9151.568533, 8.546798487926486, 55.93321306740668, 4.7804990086938135
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    6497.427932, 10.505339930563775, 61.40393712801507, 6.450692326047642
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    24213.810213, 0.23278641198623815, 412.0687550717217, 0.9592400698478208
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    26476.243648, 0.36053668439182357, 223.06811963735845, 0.8042424024757185
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    25563.355475, 0.37341174202797023, 220.37182961453752, 0.8228942879025548
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    14771.051336, 0.0, NULL, 0.8111360882484444
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    17753.316772, 0.0, NULL, 0.7855640824251948
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    18689.089726, 0.0, NULL, 0.633715690471719
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    26127.84952954, 8.633589701554419, 107.2626441863027, 9.260616602083589
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    24094.19358224, 9.362599609487646, 103.58031226120794, 9.69780991127394
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    12408.228756600001, 0.5591074245234149, 140.82063699376315, 0.7873386366932963
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    11341.70173746, 0.9961827944816247, 204.32763998548103, 2.0354767939057186
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    11631.825834300002, 0.9800384180774682, 203.05843611312645, 1.9900506850559312
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    14168.858123979999, 0.0, NULL, 1.2557107799596114
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    13627.82219945, 0.0, NULL, 0.9435938457223911
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    13430.808740229999, 0.0, NULL, 0.6767172701801393
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    53.04723, 0.0, NULL, 6.657580424086235
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    110.636339, 0.0, NULL, 3.48754670922363
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    118.243816, 0.0, NULL, 2.344403363978037
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    6583.23337772, 0.7007355722208464, 127.10845903060199, 0.890694187729189
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    8963.983525119998, 0.420391092134404, 152.91456961015973, 0.6428392292167739
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    8035.27762005, 0.461595882729055, 149.56224175102795, 0.6903731500400208
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    4554.24973324, 0.0, NULL, 2.965271059124051
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    5918.6714689, 0.0, NULL, 2.204377114113552
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    5810.96211695, 0.0, NULL, 2.225558333838864
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    524.617895, 0.0, NULL, 7.15488288862125
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    850.909244, 0.0, NULL, 0.8747849494510839
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    942.029042, 0.0, NULL, 0.8116203067123697
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    1183.021436, 0.0, NULL, 0.4395340474625178
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    1750.162083, 0.0, NULL, 1.092331515217725
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    1671.972749, 0.0, NULL, 1.868530693379142
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    2285.674314, 3.7092243842750734, 60.325188764166846, 2.2375966115004435
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    6464.190135, 1.44901778944966, 120.14173468180158, 1.7408751080927172
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    7086.200862000001, 1.3979326994696752, 126.16473605339387, 1.7636981004899996
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    2116.94601879, 1.7647971293738536, 96.94464110761494, 1.7108762433489733
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    1506.51006091, 2.47989067842222, 109.98457401644669, 2.7274971987362484
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    1462.07471471, 2.555259467530717, 112.53092652518264, 2.8754571539347644
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    2176.831441, 0.0, NULL, 0.5474572709463177
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    2435.5247130000002, 0.18221983034339262, 728.5378646145152, 1.3275404608879449
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    2447.704985, 0.0, NULL, 0.7247620162035173
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    388.646129, 0.0, NULL, 0.5561377918677277
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    298.965257, 0.0, NULL, 0.6044016679837818
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    285.946801, 0.0, NULL, 0.6068272118910678
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    1184.3658500000001, 8.524669889797988, 91.33166227693536, 7.785722713973894
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    1995.011317, 0.0, NULL, 0.4368550657199104
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    2095.383875, 0.0, NULL, 0.2535612716786799
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    6349.616319, 0.0, NULL, 0.571705819316608
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    13106.929784, 0.0, NULL, 0.7761145338870918
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    13045.295056, 0.0, NULL, 0.7964254127944348
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    3193.2976510000003, 1.2154005433175323, 101.331496860571, 1.231583563395168
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    3495.704835, 0.9059917668935571, 72.80593940196897, 0.6596158167913511
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    3675.007477, 0.8617886684098303, 70.79989901107007, 0.6101455069230053
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    1685.758269, 0.0, NULL, 0.8082232340513584
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    2408.040083, 0.0, NULL, 1.1906884442006194
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    2121.07752, 0.0, NULL, 0.8012162139175376
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    712.385331, 0.9995548322148144, 585.5107558517569, 5.852501053253721
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    790.519402, 0.9007599284704212, 321.9688647800871, 2.900166516090139
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    761.921777, 0.934568641421047, 488.7087641324244, 4.567318857457988
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    1961.2854875399998, 0.0, NULL, 0.3916521693960345
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    2355.12116332, 0.0, NULL, 0.6901352088861327
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    2218.7786436899996, 0.0, NULL, 0.7629600103706956
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    1016.6009184, 2.5827627641065094, 107.40940373555496, 2.77413008483074
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    1629.8663092000002, 0.0, NULL, 1.516042670526047
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    1811.97218, 0.0, NULL, 1.3823009688813215
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    20.580509, 0.0, NULL, 3.4836699131202242
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    21.551339, 0.0, NULL, 3.063410584372507
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    2374.05045, 0.0, NULL, 1.950428349153237
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    2119.9027389999997, 0.0, NULL, 1.665540515158512
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    2222.341452, 0.0, NULL, 1.8563126275160706
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    264.208273, 0.0, NULL, 3.0613530409776377
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    558.846759, 0.0, NULL, 3.9327382052510034
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    562.113805, 0.0, NULL, 3.4288634843259183
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    40.270567310000004, 0.0, NULL, 0.4751773386427616
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    8.53417191, 0.0, NULL, 0.36729960833423153
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    13.02315759, 0.0, NULL, 0.3672995559596849
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    1160.13241383, 0.0, NULL, 0.1970875680002377
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    1076.67109005, 0.0, NULL, 0.19194961015476186
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    1068.84477163, 0.0, NULL, 0.19802198936448384
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    180.66828107, 0.0, NULL, 0.6496671098261199
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    635.75836305, 0.0, NULL, 0.4983543267602793
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    689.23694033, 0.0, NULL, 0.504793988310345
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    105.106233, 0.0, NULL, 0.41915877624498254
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    149.064575, 0.0, NULL, 0.8564757924543775
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    48.470706, 0.0, NULL, 0.4602945127310504
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    56.08236607, 100.0, 88.00000003280888, 88.00000003280888
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    298.97601450999997, 15.870053016715493, 101.33337181756994, 16.081659831073786
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    294.57477327, 14.622458967495957, 101.4685957501349, 14.837203778457821
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    40.48821, 0.0, NULL, 0.3005467517581044
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    37.449915, 0.0, NULL, 0.16724737559484448
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    55.83359, 100.0, 81.00000017910367, 81.00000017910367
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    57.808754, 100.0, 96.00000027677468, 96.00000027677468
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    57.888302, 100.0, 96.00000013819717, 96.00000013819717
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    300.158045, 0.0, NULL, 1.3639487823822944
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    600.1664109999999, 0.0, NULL, 0.8959321783837718
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    477.665744, 0.0, NULL, 0.9682584648565463
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    444.816821, 17.458569085902443, 89.37141865403484, 15.602970868765775
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    376.937343, 0.0, NULL, 0.9296019789686903
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    1099.017695, 0.0, NULL, 0.688815842951464
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    206.76203, 0.0, NULL, 0.1632021121092688
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'ENTIDADES_FINANCIERAS' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    582401.9111498501, 0.0074249891805168965, 6492.528997909206, 0.48206957563668057
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    514660.7575689599, 0.0048196989250101005, 12897.503365900699, 0.6216208310794574
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    518181.14538231, 0.004197527943302494, 12496.459917980206, 0.5245423969808151
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    187636.4266626, 4.60867975041418e-05, 782652.6856933781, 0.3606995584162346
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    186548.23906554998, 0.0, NULL, 0.7714888186557952
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    184340.94888406, 0.0, NULL, 0.4852933724251627
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    64073.23821713, 0.0, NULL, 0.3599187904605482
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    66714.625315, 0.0, NULL, 0.3953169500012203
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    67261.967316, 0.0, NULL, 0.44675903635889014
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    136825.11226302, 0.0017071137244966767, 30449.758320018, 0.5198120033570961
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    120199.23061389, 0.0, NULL, 0.5169155889989535
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    123464.59769694, 0.0, NULL, 0.5187578571892709
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    41354.77081784, 0.0, NULL, 0.5017499987461853
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    29908.50280159, 0.0, NULL, 0.43059557749963184
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    32145.641770180002, 0.0, NULL, 0.4074733854637444
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    18207.278002, 5.580186120563416e-06, 10913589.566929134, 0.6089986102690366
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    11374.741684, 8.932070971151207e-06, 7007004.822834646, 0.6258706437275784
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    10381.631354000001, 9.7865158697678e-06, 6250087.696850395, 0.6116658243266687
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    23385.541833, 0.0, NULL, 0.5252996397400171
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    5395.74105, 0.0, NULL, 0.5649968135516807
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    5429.392785, 0.0, NULL, 0.614646541915276
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    30649.736769, 0.0, NULL, 0.5000000005057139
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    21994.368198, 0.0, NULL, 0.5000000000454662
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    18601.646161, 0.0, NULL, 0.5000000010482942
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    3124.72961165, 0.0, NULL, 0.5041361444928911
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    3062.58980618, 0.0, NULL, 0.5044886683428058
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    15970.78139023, 0.0, NULL, 0.5130678599115178
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    12982.56534621, 0.0, NULL, 0.4701178284291669
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    13662.16271356, 0.0, NULL, 0.4665103331461658
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    4525.424452159999, 0.0, NULL, 0.5950760854519703
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    4756.73185913, 0.0, NULL, 0.5318602275518466
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    4489.26843676, 0.0, NULL, 0.808637059721023
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    1666.555141, 0.0, NULL, 0.241359250650801
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    1258.40973, 0.0, NULL, 0.5568876203778239
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    1686.658352, 0.0, NULL, 0.709988717383116
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    5317.38883103, 0.0, NULL, 0.5014508637096426
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    4277.16107563, 0.0, NULL, 0.50153005838903
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    4231.60949061, 0.0, NULL, 0.5011368869707082
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    195.76535457, 0.0, NULL, 6.6837229951847235
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    140.32830055000002, 0.0, NULL, 4.229517222639806
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    137.75585431, 0.0, NULL, 1.7760263346008645
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    29896.623898, 0.0, NULL, 0.512780936479773
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    23593.012716, 0.0, NULL, 0.5728027430271826
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    26647.80414, 0.0, NULL, 0.5553278057078965
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    3420.688513, 0.0, NULL, 0.6111268219995335
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    3345.109154, 0.0, NULL, 0.611111059725975
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    3292.072903, 0.0, NULL, 0.6111110413644445
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    1068.998154, 0.0, NULL, 0.5000000215154722
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    540.493207, 0.0, NULL, 0.499999993524433
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    534.277213, 0.0, NULL, 0.4999999878340311
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    2275.266606, 0.0, NULL, 0.4999999986814732
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    1565.293564, 0.0, NULL, 0.48669132584512426
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    2205.562967, 0.0, NULL, 0.4913195026456028
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    3354.4821730000003, 1.216880129176349, 453.32623371366213, 5.51643685840509
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    9098.819248000002, 0.27260771231885006, 780.459894445604, 2.127593863814273
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    8761.981548000002, 0.24355419927665883, 856.8878772965955, 2.086986408248482
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    1417.1820037100001, 0.0, NULL, 0.46127144734316616
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    2077.04153885, 0.0, NULL, 0.46919114267669865
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    2129.89802454, 0.0, NULL, 0.4640942644253983
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    475.429492, 0.0, NULL, 0.5020067202730453
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    3374.049432, 0.0, NULL, 0.5858045176381399
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    3138.44475319, 0.0, NULL, 0.4999999994917865
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    3550.26122209, 0.0, NULL, 0.49999999942398604
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    3533.00915238, 0.0, NULL, 0.49999999966317665
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    989.780657, 0.0, NULL, 0.4999999712057415
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    1402.106491, 0.0, NULL, 0.49999996754882725
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    1375.662058, 0.0, NULL, 0.49999997891924125
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    1800.48911237, 0.0, NULL, 0.5336681573904141
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    335.90334681999997, 0.0, NULL, 0.4999999987794108
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    329.57726379, 0.0, NULL, 0.5000000003185899
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    1857.886114, 0.0, NULL, 0.4999949636310162
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    477.34243, 0.0, NULL, 0.49999494073887374
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUBERNAMENTAL_TOTAL' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    274332.23985199, 0.01573121237711024, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    282324.61092075997, 0.008785660916738767, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    287268.04257929, 0.007428662725026163, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    88457.67464596001, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    95922.5749084, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    95580.42989978999, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    47796.036057, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    47054.334175, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    46848.84045, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    80013.26249793, 0.0029192163862340045, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    76729.89294369999, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    80927.90314344999, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    27148.3654472, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    29540.338535169998, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    31782.734181840002, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    5945.096424, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    4948.063414, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    4106.400346, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    1563.449612, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    501.160998, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    648.597041, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    7401.20815117, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    6497.310258189999, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    6447.43465395, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    3160.7274521599998, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    3422.11231318, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    3174.74895493, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    520.851158, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    888.851031, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    1316.250239, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    195.76535457, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    140.32830055000002, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    137.75585431, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    8071.855731, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    10094.20873, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    9649.099959, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    1.867321, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    3220.0168000000003, 1.267696087796809, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    5260.061763000001, 0.471554976302281, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    5147.7686570000005, 0.41455192379287215, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    836.0632, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    1325.37355057, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    1500.07919902, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_ESTADOS_MUN' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    308069.67129786004, 2.839994590554886e-07, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    232336.14664819994, 4.372974307516249e-09, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    230913.10280301998, 4.399923554215123e-09, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    99178.75201663999, 8.719167991294274e-07, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    90625.66415714998, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    88760.51898427, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    16277.20216013, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    19660.291139999994, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    20413.126865999995, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    56811.849765089995, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    43469.33767019001, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    42536.694553490015, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    14206.405370639997, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    368.1642664200008, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    362.9075883400001, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    12262.181578000002, 8.285638192006879e-08, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    6426.67827, 1.5809100087407983e-07, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    6275.231008000001, 1.6190639017189147e-07, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    21822.092221, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    4894.580051999999, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    4780.795744, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    30649.736769, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    21994.368198, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    18601.646161, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    3124.72961165, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    3062.58980618, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    8569.57323906, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    6485.255088020001, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    7214.728059609999, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    1364.6969999999997, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    1334.61954595, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    1314.5194818300006, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    1145.7039829999999, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    369.55869900000005, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    370.40811299999996, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    5317.38883103, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    4277.16107563, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    4231.60949061, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    21824.768167000002, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    13498.803986, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    16998.704181, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    3418.821192, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    3345.109154, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    3292.072903, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    1068.998154, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    540.493207, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    534.277213, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    2275.266606, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    1565.293564, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    2205.562967, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    134.465373, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    3838.757485, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    3614.212891, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    581.1188037100001, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    751.6679882800001, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    629.8188255199998, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    475.429492, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    3374.049432, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    3138.44475319, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    3550.26122209, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    3533.00915238, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    989.780657, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    1402.106491, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    1375.662058, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    1800.48911237, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    335.90334681999997, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    329.57726379, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    1857.886114, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    477.34243, 0.0, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'GUB_OTRAS' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    1618451.4725077301, 3.0716375160186797, 261.6817730954411, 8.037915514982446
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    1822653.2866468702, 2.9869845370976518, 267.6479014562244, 7.994601430363786
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    1838223.15439758, 3.0556077884841635, 264.27357384352155, 8.075163905268091
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    480561.98406453, 2.819947016261073, 280.65807701028234, 7.914409068547161
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    541506.77467349, 2.694131532918728, 298.1875922106547, 8.033565948998357
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    549421.99243091, 2.783941139996137, 291.6418959511275, 8.119138722848165
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    196208.81661, 3.2973420663657707, 252.96531354131608, 8.341131696711884
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    212286.105837, 2.82716942888777, 274.8199275486283, 7.769624976146336
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    212045.471332, 2.801597387429556, 280.2873231912583, 7.852522323822529
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    195971.37598033, 2.172941146123002, 288.7653359516339, 6.274700800633372
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    225836.76039369, 2.0258503416513904, 300.474614296572, 6.087166000302801
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    229954.73478083, 2.0443137854676148, 297.22284507705206, 6.0761675954692285
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    215811.25280901, 3.013685048344461, 272.26703040327106, 8.205270786834848
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    248744.95323387, 3.3091709452335465, 250.7612713124896, 8.298119132171172
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    251357.64236216998, 3.315023823379111, 253.78647688734483, 8.413082169330002
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    106311.81628199999, 2.8325039721006546, 351.1308292125632, 9.945794684715818
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    99132.472493, 3.1700013456457476, 333.48215343220585, 10.57138875128934
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    97179.15778699999, 3.2815308617817633, 324.894964839889, 10.661528539595965
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    45657.784911999996, 2.3710867885653157, 280.3354379408368, 6.646996532681901
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    55377.44662, 2.7042194384223484, 257.66244596604037, 6.967757949328145
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    56073.571421, 2.6534140314144197, 262.9451285498261, 6.977022935861768
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    83469.04698099999, 1.4178059374146001, 297.95982886356325, 4.224492144737982
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    95775.571554, 1.6220662782723092, 266.81960619172946, 4.327990855855019
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    96438.414303, 1.7231695523101367, 256.3761783783086, 4.4177962451913375
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    6725.146391179999, 2.3820579987685853, 382.67096955734024, 9.11544443930592
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    7559.27154783, 2.374622089234634, 367.4891897792056, 8.7264794760464
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    7603.658126509999, 2.542824205048059, 347.7856860743601, 8.843578607191285
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    121655.70403534999, 4.846443256895528, 216.7184559736414, 10.503136995982647
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    140020.54208236, 5.440051917246238, 209.15741631785622, 11.378272036462231
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    141990.02181956999, 5.82720767470832, 198.1110935449317, 11.544344847498838
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    12150.600084, 2.7220896639955616, 280.3447449767299, 7.63123532656628
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    13324.259619, 2.621462760316694, 296.60492917379736, 7.775387763554803
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    13422.301537000001, 2.6970969323113034, 287.63599320413493, 7.757821548931873
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    12237.09279921, 1.8570434823757376, 421.4723881227433, 7.826925513646778
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    13480.46329405, 2.208347410443947, 362.81425468824585, 8.012199198129386
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    13571.7878211, 2.188261763629083, 355.30352237793437, 7.77497112502364
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    26219.759628, 2.153093266336179, 330.2196427802245, 7.1099368928203965
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    33080.121934999996, 2.6903855788341735, 275.80714854914675, 7.420275749959989
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    33743.568100000004, 2.523359155370412, 295.1597392144985, 7.4479403024364785
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    5254.465923, 1.9781498352672826, 187.4847135942011, 3.708728553115026
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    6416.821518, 1.233886415227546, 255.46400261320662, 3.1521356240408998
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    6641.457217, 1.1864146892087102, 258.2787631900126, 3.064257185592889
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    22827.77508077, 16.248142216735424, 148.85981906783869, 24.186955105717473
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    31042.91108435, 7.886272809395773, 194.79657134876828, 15.362189039913149
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    30870.396836949996, 7.935713519360251, 195.89663493238433, 15.545795742301017
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    301.55909, 6.713039557189271, 287.73799222585944, 19.315965239184134
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    432.435639, 5.818874933201331, 329.44361833810103, 19.169912126507224
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    440.510649, 5.954782945553718, 327.7308847512183, 19.515662832477858
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    14.055723, 8.442867008691051, 187.15098769198102, 15.800908996285715
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    10.144499, 1.5322590105238316, 691.1001029336079, 10.589443598939683
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    10.757736, 1.4449136881589213, 699.9601132269687, 10.113819487669154
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    146.67389500000002, 0.1919734933063583, 2003.259522329752, 3.845727285008691
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    157.215505, 1.24950016857434, 345.4547120557441, 4.316457209484523
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    157.83827300000002, 1.2175342288495514, 302.39637619130633, 3.68177938692981
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    3395.512868, 6.851640062758261, 150.4263787505536, 10.30667403142941
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    3646.6492970000004, 6.054043534749044, 167.33983320974755, 10.130826353494555
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    3576.655443, 5.987279216931828, 170.16077211619893, 10.188000544283907
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    613.679975, 0.007958871397099115, 59468.90995454733, 4.733054064539095
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    866.555848, 4.834826179604757, 160.2997188140127, 7.750212771052698
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    870.312134, 4.797800969186534, 167.92883410523328, 8.056891230244528
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    48565.198904, 3.360693296502842, 234.63478601863835, 7.8853555249921685
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    59110.491326, 3.2626805051639, 236.7998607510717, 7.7260228929804775
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    58108.318913999996, 3.506594880185179, 236.53731878932507, 8.294405510393767
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    1936.06769652, 1.4454580730984739, 156.84054642578582, 2.267064340203281
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    2384.6900126600003, 1.6293415678232959, 150.54594757089757, 2.4529077024460992
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    2432.27411301, 1.5799635577440365, 153.88228258115942, 2.4312839866070175
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    703.3029202900001, 1.32074278550839, 378.87447259219806, 5.003957262894419
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    559.64682599, 2.726169509317045, 224.31894442125886, 6.115314666434208
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    937.718965, 2.5992861304666053, 235.45772279714953, 6.120219931778815
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    17774.801253, 2.2535059621687457, 195.32800697637927, 4.40172828299809
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    22082.053326, 2.1519427608685957, 203.41336192835846, 4.377339116656746
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    22517.762508, 2.074457317124841, 207.17188123004573, 4.297692249201868
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    13.854782, 10.875934388574283, 99.49138493413686, 10.820617747720606
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    24.838977000000003, 4.42968726127489, 153.8689380699071, 6.815912748741624
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    35.567713999999995, 3.0575060292039016, 140.87210398304347, 4.307173072747943
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    181.248346, 2.3362166295299596, 749.5355844126401, 17.510774967292665
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    227.567008, 4.482328563198405, 465.4787834202148, 20.864288464872732
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    5196.748181, 1.0802438379686423, 251.20796503559683, 2.713658562783456
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    7404.20913, 1.1170978499900908, 249.9195312772311, 2.7918457106032606
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    7533.6040760000005, 1.1617911841004478, 197.1717919142138, 2.2907244959922153
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    254.716598, 18.058335562411994, 175.8190507334973, 31.74999416410233
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    563.71402, 10.09867219552212, 232.4974457482694, 23.479154909079607
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    614.567353, 10.036516534583964, 242.94781352501934, 24.38349747484878
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    45.98192254, 5.521152987440964, 293.77194355534033, 16.219598437869056
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    9.80257958, 42.710186087568594, 94.3371963328502, 40.29159210355526
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    6.53186053, 37.73361079404431, 95.97875662964752, 36.21625047159419
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    490.47067899999996, 7.031619315208851, 136.06036250663308, 9.567246730359596
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    404.250303, 8.430632641974793, 126.121293659919, 10.632822951774015
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    438.991776, 7.277588726400196, 146.8627942342335, 10.688070156466893
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    7528.69694, 2.520202519933018, 137.42046114964285, 3.4632739247968725
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    762.244295, 5.973036767694011, 173.21259715647554, 10.346052114433995
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    407.5295, 0.2649258519935367, 1661.9138036272836, 4.402839303657773
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    468.620832, 1.3193005043360941, 1000.5673740969901, 13.200490412684001
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TOTAL' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    600391.98487873, 3.4715587800293433, 304.1333834510364, 10.558169176194765
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    666604.23361002, 3.231275127588122, 326.8442462828461, 10.56123683609047
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    669663.9926789, 3.248856909396662, 328.10892864734996, 10.65978959870679
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    192508.04512390998, 3.0933254654926556, 306.87601364605604, 9.492673877602169
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    217244.66241352996, 2.644977357695549, 376.43989138100824, 9.956749892361385
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    219009.02917543997, 2.8446461169823976, 354.61077067019704, 10.087421518271116
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    82480.715478, 4.055933068248305, 297.61299388993535, 12.070983834585695
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    82812.448832, 3.759309270416142, 306.96554169769854, 11.53978406602471
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    81423.004383, 3.488734793717689, 332.52339139811147, 11.600859252955969
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    61539.628971410006, 2.8102280191897875, 335.1491235271631, 9.418454575429331
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    70458.2595518, 2.807234717891168, 341.5720499693685, 9.588729173352682
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    71993.82233458999, 2.8796403190332245, 336.3385612739954, 9.685340818902239
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    134726.24316671002, 3.0476446096765804, 300.3561512285064, 9.153788052747613
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    156264.06407043, 3.2361493387761753, 280.48967901624155, 9.077064892819518
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    157573.80725455, 3.207374263868378, 288.23953608657973, 9.244920698734564
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    43386.728021999996, 3.245696889809129, 407.24128292867647, 13.21781765403485
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    42449.456762, 4.1714877434784166, 343.0459477647842, 14.310119665507345
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    41580.60307099999, 4.171014886529134, 342.91003753082856, 14.3028287128135
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    11722.950826, 2.8501014544816963, 430.10316429271666, 12.258376541278517
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    13630.178734000001, 2.6924765710119263, 467.10596404224447, 12.576718643636825
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    13755.071729000001, 2.7327891079440256, 470.6479617924801, 12.861816236625456
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    14873.580087, 1.2254286455169305, 856.6572321128426, 10.497723116203234
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    16697.374157, 1.4417579419161364, 729.0675627951478, 10.511389488533458
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    16570.872206, 1.569584152038931, 685.5022025439869, 10.759533933008232
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    2712.27366485, 2.87398633811205, 421.2488970569357, 12.106635750864024
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    3050.08964454, 3.1106177157723782, 363.863728240775, 11.31840959192741
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    3082.0095696999997, 2.977242454796522, 382.40164607156726, 11.385024154683437
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    7804.97825765, 8.03413197807936, 213.8726527508227, 17.182811187020476
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    6580.23625213, 7.382985279179641, 285.34311617466, 21.066840262327606
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    6415.5985631700005, 7.380595427187001, 291.1886176398823, 21.491453798018195
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    1555.352564, 3.125534115234853, 497.48577311762324, 15.549087557231173
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    1769.0786269999999, 3.5003376930176437, 444.18598131514244, 15.548009331074239
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    1810.7093539999998, 3.2187292163289944, 471.4778006888631, 15.175593719277822
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    5906.029775820001, 2.8843687847196495, 432.23739392845016, 12.467320466357922
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    6366.264934219999, 3.441215079385343, 383.5392763054256, 13.19841141158772
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    6368.29789334, 3.368522297525428, 378.0223516330773, 12.733767204390187
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    26028.85457, 2.1346397917962627, 332.65088266698706, 7.100898109171003
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    32900.523159, 2.7050719701292762, 274.8946160006255, 7.43609720482743
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    33563.736619, 2.536879086692609, 294.30965019536205, 7.466279965924313
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    14623.88143164, 15.312618919250037, 163.83803963289992, 25.08789465375581
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    15244.31677737, 9.406060172461068, 223.00318077967196, 20.97581337063808
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    15280.74413311, 9.195267872233046, 228.4268979831278, 21.004465161781106
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    299.16091900000004, 6.766853460561804, 286.41635176748855, 19.38137481119317
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    430.319708, 5.829114152494266, 329.7159600088137, 19.219519687906093
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    438.25721000000004, 5.967361267142644, 327.96678514021914, 19.57096290555037
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    181.248346, 2.3362166295299596, 749.5355844126401, 17.510774967292665
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    227.567008, 4.482328563198405, 465.4787834202148, 20.864288464872732
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    223.42470200000002, 19.510472033660804, 172.89632722777577, 33.73288957100187
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    525.7116410000001, 9.951598541832555, 239.40984097012824, 23.82510624298692
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    570.862175, 10.036461427839392, 248.99710900000946, 24.990498801221154
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.13731874, 0.0, NULL, 42.67834091690617
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_TARJETA' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    398295.58532672, 2.7437106202007606, 262.7831086010107, 7.2100080587796285
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    428009.68998013996, 2.6887650916674315, 262.84806134494903, 7.067366917567586
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    432566.21826622, 2.731458158942109, 259.2173169268318, 7.080412552588775
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    156191.80812236, 2.4768546550913353, 292.8121032580585, 7.252530210218071
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    171956.41792781, 2.5402339519853196, 270.5133266458371, 6.871671368102504
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    174689.82727691001, 2.549291536725122, 269.6827284185828, 6.874998971584326
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    54355.65689, 3.5235664870648575, 209.4099904184696, 7.378700242950924
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    55919.909267, 3.076087687815883, 233.13437523484208, 7.1714178126654575
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    56190.954009, 3.1393883768505786, 228.9443533549609, 7.187452418681358
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    83249.89523337001, 2.620422832106538, 261.55288018812945, 6.853791390482002
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    89913.96512636, 2.4766463154867093, 273.51985209462276, 6.774119339026171
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    91268.69977362001, 2.4597217052377407, 268.3308709441723, 6.600192674467276
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    60794.00267795, 2.812868462204805, 233.75394379280522, 6.5751909641077635
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    67890.42465606, 3.199281654362319, 196.09916893745637, 6.273764736173012
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    68722.00287881, 3.20897245627278, 195.81755264269333, 6.28373132885148
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    32923.573339, 2.9404130378923323, 299.0758696150226, 8.794065863349998
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    30601.228602, 2.3170599005088928, 389.2874815779427, 9.020024133343455
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    29941.892431, 2.650747967347141, 340.26782317884516, 9.019642406449604
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    1910.492013, 3.121740922975531, 204.70891889420787, 6.390482094101276
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    1610.0103430000001, 3.07022567991043, 227.03451325466105, 6.970471928204253
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    1581.297844, 3.805972241621548, 166.4611798828046, 6.335466299415255
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    1889.5524110000001, 1.8758089901958268, 379.4982388470233, 7.118662081927295
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    2532.7328959999995, 2.9888911744130486, 291.42300533033875, 8.710316486527763
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    2568.1052149999996, 3.613318623318165, 241.4030690232143, 8.722662050277407
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    2432.58050061, 2.326454909336346, 317.8991812082181, 7.395781107958636
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    2719.8843230199996, 2.060855911245599, 339.2571153617371, 6.991600316253659
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    2718.8060847099996, 2.2639975828421615, 313.4826887178177, 7.097240495200009
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    2058.4562848299997, 3.7505769988394966, 215.56728470786203, 8.085016997275925
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    1987.99606664, 2.613852382405637, 299.23783150223636, 7.821635187780171
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    1981.32452917, 2.569278739072847, 306.80292106130156, 7.882622221682471
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    2314.7920729999996, 2.220247278339458, 318.6619758046973, 7.0750838449065325
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    2281.397426, 2.2978697355644337, 308.8513173881177, 7.09700095015361
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    2263.760399, 2.4171444568149285, 296.23142024416336, 7.160341353775931
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    14.79279433, 2.7942356310716043, 303.7853899133735, 8.488479606949285
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    39.12631992, 0.7270109751737674, 857.766765673189, 6.236058527837136
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    42.577086349999995, 0.7972803897606302, 763.7783629445886, 6.089455108991977
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    43.430503, 0.311025640204996, 1719.632810186556, 5.3484989570579
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    52.59656, 1.4484559446473306, 463.73559733171624, 6.7170058269970525
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    56.452725, 2.4137063356994726, 266.21393024967654, 6.425622500951017
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    113.97987554, 3.2222119146911288, 262.4796171283558, 8.457649496745539
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    501.79691478, 5.012678051443957, 134.53767650301202, 6.7439405809891575
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    538.45569065, 5.940928853659985, 104.7416835838473, 6.222628901842028
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.146096, 0.0, NULL, 11.870961559522506
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.080288, 0.0, NULL, 15.957552809884417
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.102097, 0.0, NULL, 12.970018707699541
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    1.91066073, 1.7403047792791555, 483.65195727568107, 8.417018127545857
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    1.37777555, 12.761437811840977, 86.70939462918511, 11.065365472627239
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    1.30274, 13.72307597832261, 85.27739741352308, 11.702682039393894
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.515852, 0.4887060629793041, 892.5029750099169, 4.361716151144127
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.745488, 10.985555770180069, 74.04146722672658, 8.133866675251648
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.657486, 3.6855537608405347, 223.4029382634533, 8.23363539299696
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_NOMINA' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    252633.86403502, 4.580124567136219, 205.01813765060496, 9.390086089620509
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    290850.96844037995, 4.671170711352749, 210.62007123961396, 9.838423079975142
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    295652.42523758, 4.872435063711896, 204.58948900799143, 9.968489999094368
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    67817.39743453001, 4.67917146136886, 218.42316783574103, 10.220394534387802
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    77276.72642709, 4.886991121419397, 208.502459721649, 10.189496694538041
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    79643.65587044, 4.864795219548935, 210.90237161146229, 10.259968492069744
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    14785.540009, 5.1228929855719825, 182.42185300177258, 9.345276311578239
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    13733.390828, 4.693310159686661, 261.6970520765625, 12.282254332709797
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    13739.205688, 5.024658729747085, 262.18643899465934, 13.173973795158163
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    1095.70059829, 6.324878446553321, 186.6815677191906, 11.80738224035893
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    1123.96475236, 3.404112642292647, 263.3745818375034, 8.965567436915848
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    1108.70677499, 3.907501402288333, 257.71962548388433, 10.070397979755018
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    20287.802894179997, 3.384961153861589, 200.50039956144784, 6.78686063849228
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    24590.1371667, 4.075541118034735, 184.44795266685864, 7.51725215231107
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    25061.542821990002, 4.2815867642373515, 176.86967408771756, 7.572828555689457
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    13037.115725, 2.4957074775064942, 376.66748649665516, 9.400518625832788
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    12057.384759, 3.2101962551297234, 329.60554677286655, 10.580984919202411
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    11891.106305000001, 3.3414518196084693, 315.8331256751157, 10.553411724797458
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    7782.329418, 3.0731378762615105, 320.38758143532783, 9.845952115927252
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    9567.426392, 3.725262880496484, 261.1065839506586, 9.726906650446274
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    9630.03262, 3.4902031723335947, 275.1266269695502, 9.602478262425658
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    7248.544198, 3.865534020987424, 204.23208281896822, 7.89466064313843
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    8848.223547000001, 3.533763657067783, 200.1706888859929, 7.073559055955438
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    8904.532168999998, 3.476021908007327, 199.1002143297758, 6.92076706899255
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    1220.82364595, 1.614243883248566, 475.8647223488492, 7.68161717305407
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    1425.6904262100002, 1.6419858525831068, 489.8930011941962, 8.043973772403493
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    1427.7825071400002, 2.313831940424567, 347.00571394186244, 8.029129044285117
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    71410.55366875, 4.798233659907119, 202.47408347562143, 9.715179625915706
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    85664.18796786, 5.770719847475481, 198.6679181108597, 11.464568980989714
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    87488.6101989, 6.365367637672245, 184.70200937021545, 11.756961930582053
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    2596.577815, 3.5179421341547585, 287.36573497030884, 10.10936026964399
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    2469.649654, 3.3756414746915353, 299.03399707781966, 10.094315628786754
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    2484.860375, 3.5444267165313055, 290.82060772607787, 10.307923317421809
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    969.1663280399999, 3.4871770956331796, 305.51554489745, 10.653868105262779
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    1079.72717854, 2.9671136456266534, 344.67925236239256, 10.22702513048848
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    1089.6423624200002, 3.1239075731601913, 338.1500019482706, 10.563493519503359
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    190.905058, 4.669123015064378, 178.67006926051812, 8.342325324874315
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    179.598776, 0.0, NULL, 4.521958991524531
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    179.831481, 0.0, NULL, 4.025026630348443
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    5201.479610999999, 1.9957038528128148, 185.35192753406687, 3.6990755590601894
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    6357.988725, 1.2333216429225422, 252.56000708338826, 3.114877228726133
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    6579.409929, 1.176893092778746, 256.7249002200249, 3.0213776181326004
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    8089.91377359, 18.122782184233248, 125.69795970817223, 22.77996744793732
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    7174.775321029999, 11.134482927687204, 159.44861362775066, 17.75377866281583
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    7180.07390716, 11.083995081393049, 159.14580720907847, 17.63971344329752
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    2.2520749999999996, 0.0, NULL, 11.110065162128262
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    2.035643, 3.883883372477394, 226.83337127823734, 8.809943590305373
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    2.151342, 3.67500843659446, 232.9500898029395, 8.560935453312396
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    14.055723, 8.442867008691051, 187.15098769198102, 15.800908996285715
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    10.144499, 1.5322590105238316, 691.1001029336079, 10.589443598939683
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    10.757736, 1.4449136881589213, 699.9601132269687, 10.113819487669154
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    9.213438, 3.056133877495024, 433.33889727426083, 13.24341684396205
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    7.304874, 24.977734044420206, 102.52281057902259, 25.607874961292964
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    7.597149999999999, 22.057363616619394, 112.19073944445736, 24.746319343438
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    2936.125169, 7.680681000286062, 141.4147835733848, 10.86161841351662
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    3235.203529, 6.594358811976926, 160.7736652351411, 10.60199236077181
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    3222.581242, 6.45380641733407, 164.4745181313964, 10.61486700604335
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    612.0222249999999, 0.0068971351489727365, 68779.02492182318, 4.743782303003784
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    865.35275, 4.840781866123382, 160.3007664937552, 7.759810435686488
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    869.167509, 4.803356495462372, 167.93159507146652, 8.066353179798856
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    6414.097461, 2.81993741285934, 345.7429238928897, 9.74973406316939
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    9571.683068999999, 2.9572692279872226, 322.2991971064498, 9.531254978078927
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    9574.508994000002, 3.2036669576708316, 311.68444764446656, 9.985331661384619
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    1936.06769652, 1.4454580730984739, 156.84054642578582, 2.267064340203281
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    2384.6900126600003, 1.6293415678232959, 150.54594757089757, 2.4529077024460992
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    2432.27411301, 1.5799635577440365, 153.88228258115942, 2.4312839866070175
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    5.878377370000001, 0.19330181246938213, 3067.132740356648, 5.92882317795123
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    29.81804735, 0.0, NULL, 7.954842153673085
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    431.412148, 2.2010476626634077, 268.9489127949646, 5.9196937588322145
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    17774.801253, 2.2535059621687457, 195.32800697637927, 4.40172828299809
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    22082.053325999997, 2.151942760868596, 203.41336192835846, 4.377339116656747
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    22517.762508, 2.074457317124841, 207.17188123004573, 4.297692249201868
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    9.891867000000001, 9.865660345008681, 95.38927223951683, 9.410781604726386
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    20.844746, 4.885610023744113, 142.2139586583961, 6.94801941937791
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    31.757369, 3.3480512822079187, 129.47417030565634, 4.334861619046591
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    31.291896, 7.690054958638491, 228.76410218902876, 17.59208518397223
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    38.002379, 12.133237763877888, 154.06757308033386, 18.69338495887323
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    43.705178, 10.03723632014495, 163.94007283682475, 16.45505253404986
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    45.8446038, 5.53769054494479, 291.4634937738946, 16.140346336682704
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    9.80257958, 42.710186087568594, 94.3371963328502, 40.29159210355526
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    6.53186053, 37.73361079404431, 95.97875662964752, 36.21625047159419
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    1.86492, 63.79930506402419, 80.04750354259436, 51.06975098127534
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    65.809828, 2.7588873199911728, 451.1936700376015, 12.447924951270199
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    93.225078, 2.5398337558913067, 588.6593331593293, 14.950968450785313
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    699.0776529999999, 6.648337534542819, 149.80130189868794, 9.959296181364275
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    510.73040499999996, 8.338360626875152, 167.26727032057994, 13.947348210060062
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    407.5295, 0.2649258519935367, 1661.9138036272836, 4.402839303657773
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    468.620832, 1.3193005043360941, 1000.5673740969901, 13.200490412684001
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No disponible' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_PERSONALES' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    278142.95282909996, 1.045609001406894, 209.48485981079537, 2.1903925507662896
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    337003.69980376, 1.1480704858649842, 200.36594045447433, 2.3003422260836284
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    341010.0871662999, 1.2110229891663202, 194.62028697124174, 2.3568964168032025
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    64025.89624534999, 0.9019977272117343, 265.07432898020215, 2.390964422823179
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    74996.91247231, 1.0099754568958585, 243.77264728560064, 2.4620439082098744
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    76042.48792261002, 1.0437765779149395, 243.98102711441973, 2.546616815576611
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    42651.53969799999, 0.9403195637010179, 210.88111654061245, 1.9829563949825224
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    57555.230362, 0.7820225358652523, 258.35936384540724, 2.020428448789187
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    58499.123147, 0.9647990767002531, 220.06352952432584, 2.1231709010046846
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    50027.96672174, 0.5472065206300645, 238.3288534210254, 1.3041510264627196
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    64288.66804035, 0.5096262810179327, 230.9295992814886, 1.176877928587865
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    65531.97090477, 0.5110482833435168, 239.9619537398324, 1.2263214452649775
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    3.01696118, 30.417583629630922, 101.24824846266434, 30.797270649667425
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.13802915, 58.59643415901642, 81.2938302792675, 47.63528573493353
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.09735771, 92.53755044156236, 73.44234432989049, 67.96174642973833
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    15788.295079, 1.2444299718044307, 247.92735818504806, 3.0852823535576634
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    12864.132319, 1.6064906507123433, 211.0842804399704, 3.391049230391549
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    12615.899125999998, 1.5872866927677431, 217.272443301112, 3.44873657956989
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    24232.720484, 1.8376732042695236, 158.32778305129767, 2.9095472440476815
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    30562.814624000002, 2.3573151159783703, 153.3697503252528, 3.6154083077554704
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    31099.447733999998, 2.2873173796662383, 156.57204607375152, 3.5812996215439483
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    57450.552459000006, 1.1084050835793895, 176.82021872995455, 1.9598842931990121
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    67684.97805700001, 1.3652786357141031, 163.47647757066397, 2.231909422690233
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    68383.93077199999, 1.4613373137789478, 159.17134731082015, 2.3260302910976987
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    359.46857977, 1.65426237080437, 184.5533170142446, 3.052996077437948
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    363.60715406, 1.4204811765468481, 195.0184730750037, 2.7702007008195113
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    375.05996496, 1.865987005770236, 152.0584692398192, 2.8373912771881575
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    8.27197458, 0.0, NULL, 1.441847032368419
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    20.87794095, 0.0, NULL, 1.4992233704923856
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    22.8181906, 0.0, NULL, 1.4608213063133935
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    5640.522867000001, 2.458408595615751, 182.38970009749752, 4.483884064714669
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    6487.4279480000005, 2.1961287761804362, 216.2111003606372, 4.748274192316317
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    6538.583383, 2.322743644974635, 201.07172874872435, 4.67038080135163
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    5263.91671729, 0.4161791750626035, 524.9052467960423, 2.184546325976092
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    5896.083695679999, 0.7738868039378735, 274.0438447439269, 2.1207891514772443
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    5973.16083962, 0.7942203612755562, 263.6933438000993, 2.0943062277887425
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    9.555809, 0.0, NULL, 1.5104634259642484
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    6.236233, 0.0, NULL, 2.1524853224695097
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    5.594563, 0.0, NULL, 1.978313587674319
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    8122.02207117, 2.3419223493023518, 130.49907690599116, 3.0561870476946713
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    7871.123106030001, 2.7550400144786336, 124.18440822378965, 3.421330138308899
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    20.210618999999998, 13.6884080591495, 103.78552487753532, 14.206586151567155
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    8.431313999999999, 3.5290465993794093, 136.54606866188306, 4.818774392698458
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    7.884518000000001, 3.773788074299532, 145.5816767211682, 5.493943954468744
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    1.6577499999999998, 0.3999396772734128, 193.1070889894419, 0.772311868496456
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    1.203098, 0.5510773020984159, 153.68024132730017, 0.8468969277648205
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    1.144625, 0.5792290051326854, 150.5429864253394, 0.8719886425685268
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    695.51388219, 1.3291191573189438, 375.1931735202958, 4.986764346211158
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    528.45100309, 2.853830737725282, 209.29759741697734, 5.972999168406216
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    505.004077, 2.910795510270702, 214.72894975086461, 6.2503206285995985
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    3.447063, 15.329513849906428, 103.28395323399278, 15.832927915735803
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    3.248743, 0.0, NULL, 4.004441102297103
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    3.152859, 0.0, NULL, 2.741226296513736
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    5196.748181, 1.0802438379686423, 251.20796503559683, 2.713658562783456
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    7404.20913, 1.1170978499900908, 249.9195312772311, 2.7918457106032606
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    7533.6040760000005, 1.1617911841004478, 197.1717919142138, 2.2907244959922153
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    6763.651738, 2.0885055066683567, 131.6970056733776, 2.750499215605829
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    209.02756899999997, 0.4761032263643655, 375.1924010261388, 1.7863031263593752
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_AUTOMOTRIZ' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    39788.59320245, 4.337764899372529, 249.23661826798025, 10.811298543611548
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    44620.597784540005, 4.578587728127322, 219.35411520395064, 10.04332059987035
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    44799.13419896, 4.6488950252711545, 214.9939966342287, 9.994845214160291
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    947.139055, 1.0744552181939113, 751.9909969798317, 8.079806507398219
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    1151.9415789999998, 0.9170677743198297, 903.4831412280381, 8.285552734614852
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    1098.696495, 1.2244639043833485, 734.9374963856026, 8.999044363020381
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    8.036328, 5.418494615948976, 200.07371718322275, 10.840983593501907
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    2.623219, 6.802825078653364, 127.37079230945963, 8.66481220210741
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    2.057265, 0.0, NULL, 2.9865379520868722
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    38724.09550545, 4.422547779454193, 245.99974423152992, 10.87945622597452
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    43384.350741539994, 4.679805597357965, 215.57800070122943, 10.088631343488526
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    43656.39791596, 4.7389352418002995, 211.38306026746415, 10.017306338210824
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    43.354765, 1.683418189442383, 851.1927239046261, 14.329133141420558
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    39.195924, 0.0, NULL, 12.591819496333345
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    41.98252299999999, 0.8650099471153747, 1507.7333795948266, 13.042043709474061
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    65.967549, 3.035021052548125, 253.82959839251117, 7.70378174881107
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    42.486321, 4.58359762428006, 200.00893498106706, 9.167604792140041
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.d. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_BIENES_MUEBLES' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    95.53729874, 0.815637547091066, 283.3350777723799, 2.310987278391204
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    110.12226969, 0.6069566145717533, 316.3168647134087, 1.9199061333840184
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    108.82850537, 0.5970589945996976, 255.01164118930757, 1.522569940997068
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    83.17703474, 0.936842822584132, 251.79285642713972, 2.358903303217226
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    99.26116569, 0.6733694847866742, 303.87989636059183, 2.046234492493597
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    98.10963937, 0.6622900503685747, 241.5188747138643, 1.5995554769920668
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    12.360264, 0.0, NULL, 1.9885416686892772
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    10.861104, 0.0, NULL, 0.7653733911396117
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    10.718866, 0.0, NULL, 0.8179223436509049
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_ARRENDAMIENTO' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    43627.932682000006, 3.4952901874013205, 219.36689492193003, 7.667509552613186
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    51267.454376, 3.4126195132852715, 219.56947410607103, 7.493070718561631
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    50255.980366, 3.654200888383083, 220.76183940003685, 8.067081096566982
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    988.22548, 4.085178516141883, 235.37563992764566, 9.615515074555658
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    1113.184969, 5.673521809833206, 186.45516700721595, 10.578574565715323
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    1094.4876100000001, 6.192402854153825, 183.11768475617632, 11.339384737301867
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    277.51004, 3.2807631032015996, 382.2123078974483, 12.539480373394776
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    282.405503, 3.080873038086655, 389.09044308092984, 11.987382554652271
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    42151.101443, 3.4429796620202167, 220.7870667147584, 7.601653803360139
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    49538.318892, 3.3207357673690834, 222.13230803631313, 7.376427003844318
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    48533.320555, 3.5653826488938454, 223.25768342194502, 7.959990707048378
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    488.60575900000003, 6.8149473039674096, 138.06180359463605, 9.40883916188143
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    338.44047500000005, 9.533504820899449, 107.82892697618014, 10.279875951598282
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    345.766698, 8.554974834505316, 111.49903242886283, 9.538714165006137
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_MICROCREDITOS' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    5475.022254969998, 4.357092413523116, 227.56450550492437, 9.915195805226453
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    4186.52038234, 4.576683975509648, 219.59907881051873, 10.050355850287815
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    4166.48797825, 4.590069993441484, 227.8037622463763, 10.4563521348017
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    18.83713838, 59.12537459418504, 104.3111615327897, 61.67436499980737
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    32.05543275, 0.6141464117342168, 2108.574578336503, 12.949735111593524
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    36.99218551, 0.5879140878043244, 2466.835498820203, 14.502873420522056
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    58.18445551999999, 7.530323315466854, 295.50637371508475, 22.25258535855764
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    51.90292281999999, 8.558630841283325, 233.83395582505452, 20.01298506063594
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    51.53499286, 9.031620054055828, 220.18605785362476, 19.886368157342943
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.18710899, 100.0, 100.0, 100.0
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.18931153, 100.0, 99.99936612418693, 99.99936612418693
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.19204911, 100.0, 100.0, 100.0
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    1176.104117, 9.621014361265091, 203.95869417541425, 19.622895257665352
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    1160.270051, 5.942688250944091, 233.50662392805395, 13.876570705348664
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    1149.6568539999998, 5.511273105496574, 274.6927296243703, 15.139066530542342
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    9.292171, 46.804767152907544, 101.89042575621743, 47.6895765263037
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    7.016527, 60.33929606484805, 101.21866735258777, 61.07463136677163
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    7.721494, 56.1080018970422, 100.43080286660253, 56.34971677760807
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    1998.781498, 2.4166906211776427, 271.5317549459557, 6.562082455297973
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    9.639678, 1.7074740463322529, 125.16176068531853, 2.137104579634299
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    8.916675999999999, 0.7446496878433174, 173.0157534865508, 1.2883612682573642
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    1649.3483440899997, 3.1934778519488956, 226.63114447910405, 7.237415404558489
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    2382.89311324, 4.434334696042138, 198.02027338223166, 8.780881687785795
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    2425.27242177, 4.610542606937054, 192.42957140109266, 8.87204737779374
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.01014899, 0.0, NULL, 3.239041520387743
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    125.10019299999999, 0.0, NULL, 3.3370971697861416
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    139.049527, 0.10055122301854359, 3456.2489271614127, 3.4753005668260917
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    139.522257, 0.17631882202134963, 1562.4014243670836, 2.7548077866888296
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    439.17707999999993, 0.9944508033069488, 645.292210468471, 6.4171135706808755
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    403.014454, 1.7694804564007027, 365.0600833344785, 6.459666828723716
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    346.189683, 1.6949228380095893, 372.95679631770685, 6.32132991669772
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.489365, 100.0, 87.99995913071021, 87.99995913071021
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.489365, 100.0, 90.99996934803265, 90.99996934803265
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'CONSUMO_OTROS' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    1406113.00774537, 2.732251292540288, 56.329957192890845, 1.5390759834901513
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    1481464.6903496198, 3.0897356187252543, 54.254002788658305, 1.6763052487453685
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sistema' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    1487702.90645141, 3.106259838160727, 54.116554854503676, 1.6810008092416668
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    359991.25261155, 2.176906489799127, 65.78308729759439, 1.4320362965715574
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    388133.05801388004, 2.449345102451961, 66.3958842340597, 1.6262643387166147
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BBVA México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    390079.3936187801, 2.408526340048555, 64.47401020003994, 1.552873518153554
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    235577.254958, 3.4392950297534046, 64.92732529485413, 2.233042271817743
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    251265.683964, 3.6642194611497834, 62.88585237650302, 2.304275641089747
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Santander' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    253166.811512, 3.6862515257287787, 65.60210763807966, 2.418258693718947
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    268808.06232386, 0.7581955493412648, 61.85393258810643, 0.4689737639755691
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    288864.83458488993, 0.8746604375575185, 52.21797435090457, 0.45672996294129464
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banorte' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    290406.12747331004, 0.8965984837318219, 52.00866292154742, 0.46630888316378843
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    72803.32492421, 2.25798328995458, 50.33745146650907, 1.1366112427027717
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    78640.53455528001, 2.458981349816073, 43.369640871132326, 1.066451380503353
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banamex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    79259.69634334001, 2.5442196966597956, 41.64141214457376, 1.0594490097495297
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    152026.55911799998, 2.4595388185414, 54.41768402499459, 1.3384240627459443
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    150607.998836, 2.808183222463118, 52.64708957051189, 1.4784267364342445
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'HSBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    150072.56283200003, 2.8550892049445102, 51.68689733304592, 1.4757070261265464
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    241424.588078, 4.730814163514267, 42.68849663700664, 2.019513445094822
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    249977.98872599998, 5.817914291622326, 42.19006666074727, 2.454581917900602
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Scotiabank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    251281.459099, 5.837680467789983, 42.29852026189312, 2.469252455492723
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    5057.8481520000005, 14.712719414198814, 34.44851428395249, 5.06831324895813
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    4417.311513000001, 12.168373442038474, 27.06534916336961, 3.2934127595904505
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inbursa' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    4373.9502569999995, 12.398093831362932, 28.289557671915084, 3.5073659046415626
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Citi México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    4208.73097109, 3.706015983236021, 47.261277889453105, 1.7515105124647237
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    3652.9630018, 3.380233043399449, 42.81209633397676, 1.4471486268530869
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco del Bajío' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    3553.65739744, 4.883450529727946, 37.565015736531485, 1.834468959978033
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    575.14954403, 6.09810660445739, 24.229913912813295, 1.4775659805716075
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    613.3460365000001, 3.0927988673812843, 49.39429538997402, 1.5276662083720824
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Azteca' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    605.48500153, 3.3009281005302857, 35.45472872984212, 1.1703351036101428
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    13599.735885000002, 5.550247757624007, 41.63868781920863, 2.3110503369896875
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    14309.785675, 4.2135515072974705, 46.960062986297416, 1.9786864417869767
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Afirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    14419.828471, 4.480234160200087, 44.96514213909233, 2.014543658298139
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    7.0207377399999995, 66.61268563494298, 97.33576522374756, 64.83796729886112
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Monex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    15946.99528604, 1.398887849206833, 74.42837987461695, 1.0411695624275206
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    17230.55238214, 1.3078084968046328, 78.60766236887603, 1.0280376875996589
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banregio' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    17310.66398368, 1.3313555485062691, 77.79116682215115, 1.0356770157344772
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'J.P. Morgan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    61.029828, 0.0, NULL, 0.13149799471825482
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    55.146837, 0.0, NULL, 0.13192234397776975
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Invex' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    54.175026, 0.0, NULL, 0.13946463080608396
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    438.749642, 75.69087634719939, 97.1015583026451, 73.49702042605884
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    432.46832500000005, 66.27495597509945, 98.78170294228916, 65.46753013645565
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Multiva' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    431.940017, 66.30050116426234, 98.77001266534086, 65.4850133971264
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    4440.598405760001, 1.5453377522495286, 163.1512780592256, 2.521238293126815
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    4480.4409812700005, 4.000928345432377, 94.1515226068532, 3.766934955633763
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BanCoppel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    4561.63948253, 5.5331164037981395, 71.84382618134471, 3.9752025315562065
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    18691.614141, 6.280324733566306, 48.611954820120886, 3.05298862203813
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    17139.723932, 9.181712624098056, 39.989066963718365, 3.671681209666755
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banca Mifel' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    17102.59742, 9.58134165681601, 37.82014562790871, 3.623677367715296
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Barclays' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Base' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    58.366391, 2.207213737097433, 38.29318520714974, 0.8452124442643711
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    39.062637, 0.0, NULL, 0.4158807814229233
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Sabadell' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    40.432741, 0.0, NULL, 0.5579908619106481
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of America' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    11052.311536000001, 0.8641285552702139, 390.75430406702475, 3.37661952239056
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    10554.59792, 0.804150178370793, 475.6701557816595, 3.825102406174844
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Ve por Más' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    10585.917448, 0.7939305158276915, 496.9480870738639, 3.9454225111013734
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Actinver' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    17.526602, 19.785945958035676, 30.35811712542, 6.006640648312776
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    15.109478, 22.836599649570953, 35.77035847941641, 8.16873355916068
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bansí' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    12.82785, 26.898435825177252, 38.27348049886234, 10.294967590048216
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Compartamos' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BIAfirme' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bancrea' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    66.42886376, 46.268051747871716, 25.417902618192063, 11.760368336608742
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    126.38929883, 22.700400758287838, 52.009351327835915, 11.80633118320465
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Kapital Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    156.017434, 18.15499990853586, 52.68122661404877, 9.564276643596124
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'MUFG Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Consubanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bankaool' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'BNP Paribas México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    265.37974133, 4.339866680206927, 47.52260337371273, 2.062417629382652
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    213.43295303000002, 1.4418773841204533, 50.11214770524247, 0.7225557244589279
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Inmobiliario Mexicano' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    210.0421458, 1.6214797639912515, 45.99697605039986, 0.745831658705136
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Mizuho Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'ICBC' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Openbank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Covalto' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Volkswagen Bank' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco S3' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Bank of China' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Shinhan' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    18.466613, 0.0, NULL, 0.2248165378242345
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    17.774698, 7.586733681776196, 11.203253346819732, 0.8499609951178917
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Ualá' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    17.680898000000003, 7.744097613141594, 11.158347854919494, 0.8641133498988568
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'KEB Hana México' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Banco Bineo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Dondé Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Credit Suisse' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Hey Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Forjadores' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Pagatodo' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    976.013392, 0.23516757237281843, 446.0222710473335, 1.0488997470641264
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    676.486001, 23.238635798466433, 25.68941305452247, 5.969869138504168
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'CIBanco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'Intercam Banco' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    0.0, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2024-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-08-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;

INSERT INTO metricas_cartera_segmentada (
    institucion_id, segmento_id, fecha_corte,
    cartera_total, imor, icor, perdida_esperada
)
VALUES (
    (SELECT id FROM instituciones WHERE nombre_oficial = 'n.a. No aplica' LIMIT 1),
    (SELECT id FROM segmentos_cartera WHERE codigo = 'VIVIENDA' LIMIT 1),
    '2025-09-01',
    NULL, NULL, NULL, NULL
)
ON CONFLICT (institucion_id, segmento_id, fecha_corte) DO UPDATE SET
    cartera_total = EXCLUDED.cartera_total,
    imor = EXCLUDED.imor,
    icor = EXCLUDED.icor,
    perdida_esperada = EXCLUDED.perdida_esperada;